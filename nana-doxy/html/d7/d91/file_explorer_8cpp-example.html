<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Nana C++ Library. Reference for users.: file_explorer.cpp</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Nana C++ Library. Reference for users.
   </div>
   <div id="projectbrief">What we need to use nana</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d7/d91/file_explorer_8cpp-example.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">file_explorer.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><span class="comment">// http://cpprocks.com/introduction-to-tr2-filesystem-library-in-vs2012/</span></div>
<div class="line"><span class="comment">// https://msdn.microsoft.com/en-us/library/hh874694%28v=vs.140%29.aspx      ---  C++ 14, the &lt;filesystem&gt; header VS2015</span></div>
<div class="line"><span class="comment">// https://msdn.microsoft.com/en-us/library/hh874694%28v=vs.120%29.aspx     --- &lt;filesystem&gt; header VS2013</span></div>
<div class="line"></div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;nana/gui/wvl.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;nana/gui/widgets/treebox.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;nana/filesystem/filesystem.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">        #include &lt;nana/gui/widgets/label.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">        #include &lt;nana/gui/widgets/button.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">        #include &lt;nana/gui/widgets/listbox.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">        #include &lt;nana/gui/widgets/categorize.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">        #include &lt;nana/gui/widgets/textbox.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">        #include &lt;nana/gui/widgets/treebox.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">        #include &lt;nana/gui/widgets/combox.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">        #include &lt;nana/gui/place.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">        #include &lt;stdexcept&gt;</span></div>
<div class="line"><span class="preprocessor">        #include &lt;algorithm&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span> </div>
<div class="line"><span class="preprocessor">#include &lt;filesystem&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="comment">//__cpp_lib_experimental_filesystem </span></div>
<div class="line"></div>
<div class="line">    <span class="comment">//using namespace nana;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">class </span>file_explorer     : <span class="keyword">public</span> <a name="_a0"></a><a class="code" href="../../d6/d57/classnana_1_1form.html">nana::form</a></div>
<div class="line">{</div>
<div class="line">           <span class="keyword">public</span>:      <span class="keyword">using</span>  item_proxy = <a name="a1"></a><a class="code" href="../../da/de1/classnana_1_1treebox.html#a38932561c58a77ff473619e20c3329b9">nana::treebox::item_proxy</a> ;</div>
<div class="line">                    <span class="keyword">enum class</span> kind {<a class="code" href="../../d7/d51/namespacenana_1_1experimental_1_1filesystem.html#aa715ef1cbd3086ab6ba01bafe427fb37a334c4a4c42fdb79d7ebc3e73b517e6f8">none</a>, filesystem};     </div>
<div class="line"></div>
<div class="line"> <span class="keyword">private</span>:</div>
<div class="line"></div>
<div class="line">        <a name="_a2"></a><a class="code" href="../../dc/de3/classnana_1_1place.html">nana::place</a>             place_  {*<span class="keyword">this</span>};</div>
<div class="line"></div>
<div class="line">    <a name="_a3"></a><a class="code" href="../../d7/dc0/classnana_1_1button.html">nana::button</a>            btn_new_folder_ {*<span class="keyword">this</span>, STR(<span class="stringliteral">&quot;&amp;New Folder&quot;</span>) };</div>
<div class="line">    <a name="_a4"></a><a class="code" href="../../d5/d30/classnana_1_1categorize.html">nana::categorize&lt;int&gt;</a> path_ {*<span class="keyword">this</span>};</div>
<div class="line">        <a name="_a5"></a><a class="code" href="../../da/de1/classnana_1_1treebox.html">nana::treebox</a>       tree_   {*<span class="keyword">this</span>};</div>
<div class="line">        <a name="_a6"></a><a class="code" href="../../d1/dda/classnana_1_1listbox.html">nana::listbox</a>       ls_file_{*<span class="keyword">this</span>};</div>
<div class="line"></div>
<div class="line">        <a name="_a7"></a><a class="code" href="../../de/d10/classnana_1_1textbox.html">nana::textbox</a>           filter_ {*<span class="keyword">this</span>};</div>
<div class="line">        <a name="_a8"></a><a class="code" href="../../de/d10/classnana_1_1combox.html">nana::combox</a>        cb_types_ {*<span class="keyword">this</span>};</div>
<div class="line"></div>
<div class="line">        <a name="_a9"></a><a class="code" href="../../dd/d8c/classnana_1_1label.html">nana::label</a>         lb_file_  {*<span class="keyword">this</span>, STR(<span class="stringliteral">&quot;File:&quot;</span>) };</div>
<div class="line">        <a class="code" href="../../de/d10/classnana_1_1textbox.html">nana::textbox</a>       tb_file_  {*<span class="keyword">this</span>};</div>
<div class="line"></div>
<div class="line">        <span class="comment">//nana::button        btn_ok_,    btn_cancel_;</span></div>
<div class="line">    <span class="comment">//bool                io_read_;</span></div>
<div class="line">        <span class="comment">//nana::string        def_ext_;</span></div>
<div class="line"></div>
<div class="line">        <span class="keyword">struct </span>item_fs</div>
<div class="line">        {</div>
<div class="line">                <a name="_a10"></a><a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::string</a>  name;</div>
<div class="line">                tm            modified_time;</div>
<div class="line">                <span class="keywordtype">bool</span>          <a class="code" href="../../d7/d51/namespacenana_1_1experimental_1_1filesystem.html#aa715ef1cbd3086ab6ba01bafe427fb37a5f8f22b8cdbaeee8cf857673a9b6ba20">directory</a>;</div>
<div class="line">                uintmax_t     bytes;       <span class="comment">// nana::long_long_t</span></div>
<div class="line"></div>
<div class="line">                <span class="keyword">friend</span> <a name="_a11"></a><a class="code" href="../../d6/d05/classnana_1_1drawerbase_1_1listbox_1_1iresolver.html">nana::listbox::iresolver</a>&amp; operator&gt;&gt;(<a class="code" href="../../d6/d05/classnana_1_1drawerbase_1_1listbox_1_1iresolver.html">nana::listbox::iresolver</a>&amp; ires, item_fs&amp; m)</div>
<div class="line">                {</div>
<div class="line">                        <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::string</a>  type;</div>
<div class="line">                        ires &gt;&gt; m.name &gt;&gt; type &gt;&gt; type ;</div>
<div class="line">                        m.directory = (type == STR(<span class="stringliteral">&quot;Directory&quot;</span>));</div>
<div class="line">                        <span class="keywordflow">return</span> ires;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <span class="keyword">friend</span> <a name="_a12"></a><a class="code" href="../../d0/d3c/classnana_1_1drawerbase_1_1listbox_1_1oresolver.html">nana::listbox::oresolver</a>&amp; operator&lt;&lt;(<a class="code" href="../../d0/d3c/classnana_1_1drawerbase_1_1listbox_1_1oresolver.html">nana::listbox::oresolver</a>&amp; ores, <span class="keyword">const</span> item_fs&amp; item)</div>
<div class="line">                {</div>
<div class="line">                        <a name="_a13"></a><a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/io/basic_stringstream.html">std::wstringstream</a> tm;</div>
<div class="line">                        tm &lt;&lt; (item.modified_time.tm_year + 1900) &lt;&lt; <span class="charliteral">&#39;-&#39;</span> ;</div>
<div class="line">                        _m_add(tm, item.modified_time.tm_mon + 1) &lt;&lt; <span class="charliteral">&#39;-&#39;</span> ;</div>
<div class="line">                        _m_add(tm, item.modified_time.tm_mday )   &lt;&lt; <span class="charliteral">&#39; &#39;</span> ;</div>
<div class="line"></div>
<div class="line">                        _m_add(tm, item.modified_time.tm_hour )   &lt;&lt; <span class="charliteral">&#39;:&#39;</span> ;</div>
<div class="line">                        _m_add(tm, item.modified_time.tm_min  )   &lt;&lt; <span class="charliteral">&#39;:&#39;</span> ;</div>
<div class="line">                        _m_add(tm, item.modified_time.tm_sec  )   ;</div>
<div class="line"></div>
<div class="line">                        ores&lt;&lt;item.name&lt;&lt;tm.<a name="a14"></a><a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/io/basic_stringstream/str.html">str</a>();</div>
<div class="line">                        <span class="keywordflow">if</span>(!item.directory)</div>
<div class="line">                        {</div>
<div class="line">                                <span class="keyword">auto</span> pos = item.name.find_last_of(STR(<span class="charliteral">&#39;.&#39;</span>));</div>
<div class="line">                                <span class="keywordflow">if</span>(pos != item.name.npos &amp;&amp; (pos + 1 &lt; item.name.size()))</div>
<div class="line">                                        ores&lt;&lt;item.name.substr(pos + 1);</div>
<div class="line">                                <span class="keywordflow">else</span></div>
<div class="line">                                        ores&lt;&lt;STR(<span class="stringliteral">&quot;File&quot;</span>);</div>
<div class="line"></div>
<div class="line">                                ores&lt;&lt;_m_trans(item.bytes);</div>
<div class="line">                        }</div>
<div class="line">                        <span class="keywordflow">else</span></div>
<div class="line">                                ores&lt;&lt;STR(<span class="stringliteral">&quot;Directory&quot;</span>);</div>
<div class="line">                        <span class="keywordflow">return</span> ores;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">        <span class="keyword">private</span>:</div>
<div class="line">                <span class="keyword">static</span> <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/io/basic_stringstream.html">std::wstringstream</a>&amp; _m_add(<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/io/basic_stringstream.html">std::wstringstream</a>&amp; ss, <span class="keywordtype">unsigned</span> v)</div>
<div class="line">                {</div>
<div class="line">                        <span class="keywordflow">if</span>(v &lt; 10)</div>
<div class="line">                                ss&lt;&lt;<a class="code" href="../../d9/d0f/namespacenana_1_1bidi__charmap.html#a35c8c909095bdaeefe7ffcba2fa54828a1d8100999aa7b93a2f397b8f631f13d7">L</a><span class="charliteral">&#39;0&#39;</span>;</div>
<div class="line">                        ss&lt;&lt;v;</div>
<div class="line">                        <span class="keywordflow">return</span> ss;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <span class="keyword">static</span> <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::string</a> _m_trans(<a name="_a15"></a><a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/types/size_t.html">std::size_t</a> bytes)</div>
<div class="line">                {</div>
<div class="line">                        <span class="keyword">const</span> <a class="code" href="../../d2/d76/namespacenana.html#a35311db12836ce5d4401d47d08b4b97a">nana::char_t</a> * ustr[] = {STR(<span class="stringliteral">&quot; KB&quot;</span>), STR(<span class="stringliteral">&quot; MB&quot;</span>), STR(<span class="stringliteral">&quot; GB&quot;</span>), STR(<span class="stringliteral">&quot; TB&quot;</span>)};</div>
<div class="line">                        <a name="_a16"></a><a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/io/basic_stringstream.html">std::stringstream</a> ss;</div>
<div class="line">                        <span class="keywordflow">if</span>(bytes &gt;= 1024)</div>
<div class="line">                        {</div>
<div class="line">                                <span class="keywordtype">double</span> cap = bytes / 1024.0;</div>
<div class="line">                                <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/types/size_t.html">std::size_t</a> uid = 0;</div>
<div class="line">                                <span class="keywordflow">while</span>((cap &gt;= 1024.0) &amp;&amp; (uid &lt; (<span class="keyword">sizeof</span>(ustr) / <span class="keyword">sizeof</span>(<a class="code" href="../../d2/d76/namespacenana.html#a35311db12836ce5d4401d47d08b4b97a">nana::char_t</a>*))))</div>
<div class="line">                                {</div>
<div class="line">                                        cap /= 1024.0;</div>
<div class="line">                                        ++uid;</div>
<div class="line">                                }</div>
<div class="line">                                ss&lt;&lt;cap;</div>
<div class="line">                                <span class="keyword">auto</span> s = ss.<a name="a17"></a><a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/io/basic_stringstream/str.html">str</a>();</div>
<div class="line">                                <span class="keyword">auto</span> pos = s.find(<span class="charliteral">&#39;.&#39;</span>);</div>
<div class="line">                                <span class="keywordflow">if</span>(pos != s.npos)</div>
<div class="line">                                {</div>
<div class="line">                                        <span class="keywordflow">if</span>(pos + 2 &lt; s.size())</div>
<div class="line">                                                s.erase(pos + 2);</div>
<div class="line">                                }</div>
<div class="line">                                <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::string</a><span class="keyword">&gt;</span>(<a name="_a18"></a><a class="code" href="../../d3/d99/classnana_1_1charset.html">nana::charset</a>(s)) + ustr[uid];</div>
<div class="line">                        }</div>
<div class="line">                        ss&lt;&lt;bytes&lt;&lt;<span class="stringliteral">&quot; Bytes&quot;</span>;</div>
<div class="line">                        <span class="keywordflow">return</span> <a class="code" href="../../d3/d99/classnana_1_1charset.html">nana::charset</a>(ss.<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/io/basic_stringstream/str.html">str</a>());</div>
<div class="line">                }</div>
<div class="line">        };</div>
<div class="line">        </div>
<div class="line">    <a name="_a19"></a><a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/container/vector.html">std::vector&lt;item_fs&gt;</a> file_container_;</div>
<div class="line">        <span class="keyword">struct </span>path_tag</div>
<div class="line">        {</div>
<div class="line">                <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::string</a> filesystem;</div>
<div class="line">        }     addr_;</div>
<div class="line"></div>
<div class="line">        <span class="keyword">struct </span>selection_tag</div>
<div class="line">        {</div>
<div class="line">                kind type;</div>
<div class="line">                <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::string</a> <a class="code" href="../../dc/d5e/namespacenana_1_1widgets_1_1skeletons.html#a15b3bae04116a938253c00cb951caccda42aefbae01d2dfd981f7da7d823d689e">target</a>;</div>
<div class="line">        }    selection_;</div>
<div class="line"></div>
<div class="line">        <span class="keyword">static</span> <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::string</a> saved_init_path;</div>
<div class="line">        <span class="keyword">static</span> <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::string</a> saved_selected_path;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        <span class="keyword">struct </span>pred_sort_fs</div>
<div class="line">        {</div>
<div class="line">                <span class="keywordtype">bool</span> operator()(<span class="keyword">const</span> item_fs&amp; a, <span class="keyword">const</span> item_fs&amp; b)<span class="keyword"> const</span></div>
<div class="line"><span class="keyword">                </span>{</div>
<div class="line">                        <span class="keywordflow">return</span> ((a.directory != b.directory) &amp;&amp; a.directory);</div>
<div class="line">                }</div>
<div class="line">        };</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line"></div>
<div class="line">        file_explorer( <span class="keyword">const</span> <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::string</a>&amp; title= <a class="code" href="../../d9/d0f/namespacenana_1_1bidi__charmap.html#a35c8c909095bdaeefe7ffcba2fa54828a1d8100999aa7b93a2f397b8f631f13d7">L</a><span class="stringliteral">&quot;Nana File Explorer&quot;</span>)        : <a name="a20"></a><a class="code" href="../../d6/d57/classnana_1_1form.html#a35c51aaff4c210c637e24dfc3ff2f63c">form</a>( <a name="a21"></a><a class="code" href="../../d5/d1e/namespacenana_1_1_a_p_i.html#aeda48472927c65f3f790297e5fb2df84">nana::API::make_center</a>( 630, 440) ) </div>
<div class="line">        {</div>
<div class="line">                path_.splitstr(STR(<span class="stringliteral">&quot;/&quot;</span>));</div>
<div class="line">                path_.events().selected.connect_unignorable([<span class="keyword">this</span>](<span class="keyword">const</span> <a name="_a22"></a><a class="code" href="../../d7/dee/structnana_1_1arg__categorize.html">nana::arg_categorize&lt;int&gt;</a>&amp;)</div>
<div class="line">                {</div>
<div class="line">                        <span class="keyword">auto</span> path = path_.caption();</div>
<div class="line">                        <span class="keyword">auto</span> <a class="code" href="../../d7/d51/namespacenana_1_1experimental_1_1filesystem.html#a1378da7a0e6b632643392ed493334a3b">root</a> = path.<a name="a23"></a><a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/substr.html">substr</a>(0, path.find(STR(<span class="charliteral">&#39;/&#39;</span>)));</div>
<div class="line">                        <span class="keywordflow">if</span>(<a class="code" href="../../d7/d51/namespacenana_1_1experimental_1_1filesystem.html#a1378da7a0e6b632643392ed493334a3b">root</a> == STR(<span class="stringliteral">&quot;HOME&quot;</span>))</div>
<div class="line">                                path.replace(0, 4, <a name="a24"></a><a class="code" href="../../d7/d51/namespacenana_1_1experimental_1_1filesystem.html#a27042983bad2acdf8815ecdcbbcabdb5">nana::experimental::filesystem::path_user</a>());</div>
<div class="line">                        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="../../d7/d51/namespacenana_1_1experimental_1_1filesystem.html#a1378da7a0e6b632643392ed493334a3b">root</a> == STR(<span class="stringliteral">&quot;FILESYSTEM&quot;</span>))</div>
<div class="line">                                path.erase(0, 10);</div>
<div class="line">                        <span class="keywordflow">else</span></div>
<div class="line">                                <span class="keywordflow">throw</span> <a name="_a25"></a><a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/error/runtime_error.html">std::runtime_error</a>(<span class="stringliteral">&quot;Nana.GUI.Filebox: Wrong categorize path&quot;</span>);</div>
<div class="line"></div>
<div class="line">                        <span class="keywordflow">if</span>(path.size() == 0) path = STR(<span class="stringliteral">&quot;/&quot;</span>);</div>
<div class="line">                        _m_load_cat_path(path);</div>
<div class="line">                });</div>
<div class="line"></div>
<div class="line">                btn_new_folder_.events().click.connect_unignorable([<span class="keyword">this</span>](<span class="keyword">const</span> <a name="_a26"></a><a class="code" href="../../d6/d7c/structnana_1_1arg__mouse.html">nana::arg_mouse</a>&amp;)</div>
<div class="line">                {</div>
<div class="line">              <span class="comment">// use inputbox</span></div>
<div class="line">                        form fm(this-&gt;<a name="a27"></a><a class="code" href="../../d3/d95/classnana_1_1widget__object.html#a9503ee5c2c8f4ceb14adb6c57c34e3b6">handle</a>(), <a class="code" href="../../d5/d1e/namespacenana_1_1_a_p_i.html#aeda48472927c65f3f790297e5fb2df84">nana::API::make_center</a>(*<span class="keyword">this</span>, 300, 35));</div>
<div class="line">                        fm.caption(STR(<span class="stringliteral">&quot;Name the new folder&quot;</span>));</div>
<div class="line"></div>
<div class="line">                        <a class="code" href="../../de/d10/classnana_1_1textbox.html">nana::textbox</a> folder(fm, <a name="_a28"></a><a class="code" href="../../dd/d2d/structnana_1_1rectangle.html">nana::rectangle</a>(5, 5, 160, 25));</div>
<div class="line">                        folder.<a name="a29"></a><a class="code" href="../../de/d10/classnana_1_1textbox.html#a416bdd377eee1244bc30c7cdc9793a75">multi_lines</a>(<span class="keyword">false</span>);</div>
<div class="line"></div>
<div class="line">                        <a class="code" href="../../d7/dc0/classnana_1_1button.html">nana::button</a> btn(fm, <a class="code" href="../../dd/d2d/structnana_1_1rectangle.html">nana::rectangle</a>(170, 5, 60, 25));</div>
<div class="line">                        btn.<a name="a30"></a><a class="code" href="../../d9/dd8/classnana_1_1widget.html#ab4a216a092654c3c539d00fb1db76934">caption</a>(STR(<span class="stringliteral">&quot;Create&quot;</span>));</div>
<div class="line"></div>
<div class="line">                        btn.<a name="a31"></a><a class="code" href="../../d3/d95/classnana_1_1widget__object.html#afafd1a1bafe56cd6e5903d8db910aad8">events</a>().<a name="a32"></a><a class="code" href="../../dd/d19/structnana_1_1general__events.html#a0d38e277cb45ddeb6c492d8ce9705cfc">click</a>.connect_unignorable(folder_creator(*<span class="keyword">this</span>, fm, folder));</div>
<div class="line"></div>
<div class="line">                        <a class="code" href="../../d7/dc0/classnana_1_1button.html">nana::button</a> btn_cancel(fm, <a class="code" href="../../dd/d2d/structnana_1_1rectangle.html">nana::rectangle</a>(235, 5, 60, 25));</div>
<div class="line">                        btn_cancel.<a class="code" href="../../d9/dd8/classnana_1_1widget.html#ab4a216a092654c3c539d00fb1db76934">caption</a>(STR(<span class="stringliteral">&quot;Cancel&quot;</span>));</div>
<div class="line"></div>
<div class="line">                        btn_cancel.<a class="code" href="../../d3/d95/classnana_1_1widget__object.html#afafd1a1bafe56cd6e5903d8db910aad8">events</a>().<a class="code" href="../../dd/d19/structnana_1_1general__events.html#a0d38e277cb45ddeb6c492d8ce9705cfc">click</a>.connect_unignorable([&amp;fm](<span class="keyword">const</span> <a class="code" href="../../d6/d7c/structnana_1_1arg__mouse.html">nana::arg_mouse</a>&amp;)</div>
<div class="line">                        {</div>
<div class="line">                                fm.close();</div>
<div class="line">                        });</div>
<div class="line">                        <a name="a33"></a><a class="code" href="../../d5/d1e/namespacenana_1_1_a_p_i.html#ae6e1fbc1c0c422296f0124a05d0486ee">nana::API::modal_window</a>(fm);</div>
<div class="line">                });</div>
<div class="line"></div>
<div class="line">                ls_file_.append_header(STR(<span class="stringliteral">&quot;Name&quot;</span>    ), 190);</div>
<div class="line">                ls_file_.append_header(STR(<span class="stringliteral">&quot;Modified&quot;</span>), 145);</div>
<div class="line">                ls_file_.append_header(STR(<span class="stringliteral">&quot;Type&quot;</span>    ),  80);</div>
<div class="line">                ls_file_.append_header(STR(<span class="stringliteral">&quot;Size&quot;</span>    ),  70);</div>
<div class="line"></div>
<div class="line">                <span class="keyword">auto</span> fn_sel_file = [<span class="keyword">this</span>](<span class="keyword">const</span> <a class="code" href="../../d6/d7c/structnana_1_1arg__mouse.html">nana::arg_mouse</a>&amp; arg){  _m_sel_file(arg);               };</div>
<div class="line"></div>
<div class="line">                ls_file_.events().dbl_click .connect_unignorable(fn_sel_file);</div>
<div class="line">                ls_file_.events().mouse_down.connect_unignorable(fn_sel_file);</div>
<div class="line"></div>
<div class="line">                ls_file_.set_sort_compare(0, [](<span class="keyword">const</span> <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::string</a>&amp; a, <a name="_a34"></a><a class="code" href="../../d4/d36/classnana_1_1any.html">nana::any</a>* fs_a, </div>
<div class="line">                                        <span class="keyword">const</span> <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::string</a>&amp; b, <a class="code" href="../../d4/d36/classnana_1_1any.html">nana::any</a>* fs_b, <span class="keywordtype">bool</span> <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/algorithm/reverse.html">reverse</a>) -&gt; <span class="keywordtype">bool</span></div>
<div class="line">                        {</div>
<div class="line">                                <span class="keywordtype">int</span> dira = fs_a-&gt;<a name="a35"></a><a class="code" href="../../d4/d36/classnana_1_1any.html#a80f49074ed033a801b9ae32eed04cebf">get</a>&lt;item_fs&gt;()-&gt;<a class="code" href="../../d7/d51/namespacenana_1_1experimental_1_1filesystem.html#aa715ef1cbd3086ab6ba01bafe427fb37a5f8f22b8cdbaeee8cf857673a9b6ba20">directory</a> ? 1 : 0;</div>
<div class="line">                                <span class="keywordtype">int</span> dirb = fs_b-&gt;<a class="code" href="../../d4/d36/classnana_1_1any.html#a80f49074ed033a801b9ae32eed04cebf">get</a>&lt;item_fs&gt;()-&gt;<a class="code" href="../../d7/d51/namespacenana_1_1experimental_1_1filesystem.html#aa715ef1cbd3086ab6ba01bafe427fb37a5f8f22b8cdbaeee8cf857673a9b6ba20">directory</a> ? 1 : 0;</div>
<div class="line">                                <span class="keywordflow">if</span>(dira != dirb)</div>
<div class="line">                                        <span class="keywordflow">return</span> (reverse ? dira &lt; dirb : dira &gt; dirb);</div>
<div class="line"></div>
<div class="line">                                <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/types/size_t.html">std::size_t</a> seek_a = 0;</div>
<div class="line">                                <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/types/size_t.html">std::size_t</a> seek_b = 0;</div>
<div class="line"></div>
<div class="line">                                <span class="keywordflow">while</span>(<span class="keyword">true</span>)</div>
<div class="line">                                {</div>
<div class="line">                                        <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/types/size_t.html">std::size_t</a> pos_a = a.<a name="a36"></a><a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/find_first_of.html">find_first_of</a>(STR(<span class="stringliteral">&quot;0123456789&quot;</span>), seek_a);</div>
<div class="line">                                        <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/types/size_t.html">std::size_t</a> pos_b = b.<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/find_first_of.html">find_first_of</a>(STR(<span class="stringliteral">&quot;0123456789&quot;</span>), seek_b);</div>
<div class="line"></div>
<div class="line">                                        <span class="keywordflow">if</span>((pos_a != a.npos) &amp;&amp; (pos_a == pos_b))</div>
<div class="line">                                        {</div>
<div class="line">                                                <a name="_a37"></a><a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::cistring</a> text_a = a.<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/substr.html">substr</a>(seek_a, pos_a - seek_a).data();</div>
<div class="line">                                                <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::cistring</a> text_b = b.<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/substr.html">substr</a>(seek_b, pos_b - seek_b).data();</div>
<div class="line"></div>
<div class="line">                                                <span class="keywordflow">if</span>(text_a != text_b)</div>
<div class="line">                                                        <span class="keywordflow">return</span> (reverse ? text_a &gt; text_b : text_a &lt; text_b);</div>
<div class="line"></div>
<div class="line">                                                <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/types/size_t.html">std::size_t</a> end_a = a.<a name="a38"></a><a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/find_first_not_of.html">find_first_not_of</a>(STR(<span class="stringliteral">&quot;0123456789&quot;</span>), pos_a + 1);</div>
<div class="line">                                                <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/types/size_t.html">std::size_t</a> end_b = b.<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/find_first_not_of.html">find_first_not_of</a>(STR(<span class="stringliteral">&quot;0123456789&quot;</span>), pos_b + 1);</div>
<div class="line">                        </div>
<div class="line">                                                <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::string</a> num_a = a.<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/substr.html">substr</a>(pos_a, end_a != a.npos ? end_a - pos_a : a.npos);</div>
<div class="line">                                                <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::string</a> num_b = b.<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/substr.html">substr</a>(pos_b, end_b != b.npos ? end_b - pos_b : b.npos);</div>
<div class="line">                        </div>
<div class="line">                                                <span class="keywordflow">if</span>(num_a != num_b)</div>
<div class="line">                                                {</div>
<div class="line">                                                        <span class="keywordtype">double</span> ai = <a name="a39"></a><a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/stof.html">std::stod</a>(num_a, 0);</div>
<div class="line">                                                        <span class="keywordtype">double</span> bi = <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/stof.html">std::stod</a>(num_b, 0);</div>
<div class="line">                                                        <span class="keywordflow">if</span>(ai != bi)</div>
<div class="line">                                                                <span class="keywordflow">return</span> (reverse ? ai &gt; bi : ai &lt; bi);</div>
<div class="line">                                                }</div>
<div class="line"></div>
<div class="line">                                                seek_a = end_a;</div>
<div class="line">                                                seek_b = end_b;</div>
<div class="line">                                        }</div>
<div class="line">                                        <span class="keywordflow">else</span></div>
<div class="line">                                                <span class="keywordflow">break</span>;</div>
<div class="line">                                }</div>
<div class="line">                                <span class="keywordflow">if</span>(seek_a == a.npos)</div>
<div class="line">                                        seek_a = 0;</div>
<div class="line">                                <span class="keywordflow">if</span>(seek_b == b.npos)</div>
<div class="line">                                        seek_b = 0;</div>
<div class="line"></div>
<div class="line">                                <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::cistring</a> cia = a.<a name="a40"></a><a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/data.html">data</a>();</div>
<div class="line">                                <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::cistring</a> cib = b.<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/data.html">data</a>();</div>
<div class="line">                                <span class="keywordflow">if</span>(seek_a == seek_b &amp;&amp; seek_a == 0)</div>
<div class="line">                                        <span class="keywordflow">return</span> (reverse ? cia &gt; cib : cia &lt; cib);</div>
<div class="line">                                <span class="keywordflow">return</span> (reverse ? cia.<a name="a41"></a><a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/substr.html">substr</a>(seek_a) &gt; cib.<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/substr.html">substr</a>(seek_b) : cia.<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/substr.html">substr</a>(seek_a) &lt; cib.<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/substr.html">substr</a>(seek_b));</div>
<div class="line">                        });</div>
<div class="line">                ls_file_.set_sort_compare(2, [](<span class="keyword">const</span> <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::string</a>&amp; a, <a class="code" href="../../d4/d36/classnana_1_1any.html">nana::any</a>* anyptr_a, </div>
<div class="line">                                        <span class="keyword">const</span> <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::string</a>&amp; b, <a class="code" href="../../d4/d36/classnana_1_1any.html">nana::any</a>* anyptr_b, <span class="keywordtype">bool</span> reverse) -&gt; <span class="keywordtype">bool</span></div>
<div class="line">                        {</div>
<div class="line">                                <span class="keywordtype">int</span> dir1 = anyptr_a-&gt;<a class="code" href="../../d4/d36/classnana_1_1any.html#a80f49074ed033a801b9ae32eed04cebf">get</a>&lt;item_fs&gt;()-&gt;<a class="code" href="../../d7/d51/namespacenana_1_1experimental_1_1filesystem.html#aa715ef1cbd3086ab6ba01bafe427fb37a5f8f22b8cdbaeee8cf857673a9b6ba20">directory</a> ? 1 : 0;</div>
<div class="line">                                <span class="keywordtype">int</span> dir2 = anyptr_b-&gt;<a class="code" href="../../d4/d36/classnana_1_1any.html#a80f49074ed033a801b9ae32eed04cebf">get</a>&lt;item_fs&gt;()-&gt;<a class="code" href="../../d7/d51/namespacenana_1_1experimental_1_1filesystem.html#aa715ef1cbd3086ab6ba01bafe427fb37a5f8f22b8cdbaeee8cf857673a9b6ba20">directory</a> ? 1 : 0;</div>
<div class="line">                                <span class="keywordflow">if</span>(dir1 != dir2)</div>
<div class="line">                                        <span class="keywordflow">return</span> (reverse ? dir1 &lt; dir2 : dir1 &gt; dir2);</div>
<div class="line"></div>
<div class="line">                                <span class="keywordflow">return</span> (reverse ? a &gt; b : a &lt; b);</div>
<div class="line">                        });</div>
<div class="line">                ls_file_.set_sort_compare(3, [<span class="keyword">this</span>](<span class="keyword">const</span> <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::string</a>&amp;, <a class="code" href="../../d4/d36/classnana_1_1any.html">nana::any</a>* anyptr_a, </div>
<div class="line">                                            <span class="keyword">const</span> <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::string</a>&amp;, <a class="code" href="../../d4/d36/classnana_1_1any.html">nana::any</a>* anyptr_b, <span class="keywordtype">bool</span> reverse) -&gt; <span class="keywordtype">bool</span></div>
<div class="line">                        {</div>
<div class="line">                                item_fs * fsa = anyptr_a-&gt;<a class="code" href="../../d4/d36/classnana_1_1any.html#a80f49074ed033a801b9ae32eed04cebf">get</a>&lt;item_fs&gt;();</div>
<div class="line">                                item_fs * fsb = anyptr_b-&gt;<a class="code" href="../../d4/d36/classnana_1_1any.html#a80f49074ed033a801b9ae32eed04cebf">get</a>&lt;item_fs&gt;();</div>
<div class="line">                                <span class="keywordflow">return</span> (reverse ? fsa-&gt;bytes &gt; fsb-&gt;bytes : fsa-&gt;bytes &lt; fsb-&gt;bytes);</div>
<div class="line">                        });</div>
<div class="line">                tb_file_.multi_lines(<span class="keyword">false</span>);</div>
<div class="line"></div>
<div class="line">                tb_file_.events().key_char.connect_unignorable([<span class="keyword">this</span>](<span class="keyword">const</span> <a name="_a42"></a><a class="code" href="../../d0/de9/structnana_1_1arg__keyboard.html">nana::arg_keyboard</a>&amp; arg)</div>
<div class="line">                {</div>
<div class="line">                        <span class="keywordflow">if</span>(arg.<a name="a43"></a><a class="code" href="../../d0/de9/structnana_1_1arg__keyboard.html#a69d666b7e8659d460ac442f18d9cb071">key</a> == <a name="a44"></a><a class="code" href="../../de/d48/structnana_1_1keyboard.html#a02c28a7f05684042e0c8de2ff7cb01e7adb1c9e17a0630b810cd6944325d11588">nana::keyboard::enter</a>)</div>
<div class="line">                                _m_ok();</div>
<div class="line">                });</div>
<div class="line"></div>
<div class="line">                cb_types_.editable(<span class="keyword">false</span>);</div>
<div class="line">                cb_types_.events().selected.connect_unignorable([<span class="keyword">this</span>](<span class="keyword">const</span> <a name="_a45"></a><a class="code" href="../../d5/dd5/structnana_1_1arg__combox.html">nana::arg_combox</a>&amp;){ _m_list_fs(); });</div>
<div class="line"></div>
<div class="line">                selection_.type = <a name="a46"></a><a class="code" href="../../d2/d76/namespacenana.html#a278f991de5b82b0d32a35563193235d0a334c4a4c42fdb79d7ebc3e73b517e6f8">kind::none</a>;</div>
<div class="line">                _m_layout();</div>
<div class="line">                _m_init_tree();</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordtype">void</span> load_fs(<span class="keyword">const</span> <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::string</a>&amp; init_path, <span class="keyword">const</span> <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::string</a>&amp; init_file)</div>
<div class="line">        {</div>
<div class="line">                <span class="comment">//Simulate the behavior like Windows7&#39;s </span></div>
<div class="line">        <span class="comment">//lpstrInitialDir(http://msdn.microsoft.com/en-us/library/windows/desktop/ms646839%28v=vs.85%29.aspx)</span></div>
<div class="line"></div>
<div class="line">                <span class="comment">//Phase 1</span></div>
<div class="line">                <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::string</a> dir;</div>
<div class="line"></div>
<div class="line">                <span class="keyword">auto</span> pos = init_file.<a name="a47"></a><a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/find_last_of.html">find_last_of</a>(STR(<span class="stringliteral">&quot;\\/&quot;</span>));</div>
<div class="line">                <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::string</a> file_with_path_removed = (pos != init_file.npos ? init_file.<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/substr.html">substr</a>(pos + 1) : init_file);</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span>(saved_init_path != init_path)</div>
<div class="line">                {</div>
<div class="line">                        <span class="keywordflow">if</span>(saved_init_path.size() == 0)</div>
<div class="line">                                saved_init_path = init_path;</div>
<div class="line"></div>
<div class="line">                        <span class="comment">//Phase 2: Check whether init_file contains a path</span></div>
<div class="line">                        <span class="keywordflow">if</span>(file_with_path_removed == init_file)</div>
<div class="line">                        {</div>
<div class="line">                                <span class="comment">//Phase 3: Check whether init_path is empty</span></div>
<div class="line">                                <span class="keywordflow">if</span>(init_path.<a name="a48"></a><a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/size.html">size</a>())</div>
<div class="line">                                        dir = init_path;</div>
<div class="line">                        }</div>
<div class="line">                        <span class="keywordflow">else</span></div>
<div class="line">                                dir = init_file.<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/substr.html">substr</a>(0, pos);</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                        dir = saved_selected_path;</div>
<div class="line"></div>
<div class="line">                _m_load_cat_path(dir.<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/size.html">size</a>() ? dir : <a class="code" href="../../d7/d51/namespacenana_1_1experimental_1_1filesystem.html#a27042983bad2acdf8815ecdcbbcabdb5">nana::experimental::filesystem::path_user</a>());</div>
<div class="line"></div>
<div class="line">                tb_file_.caption(file_with_path_removed);                                       </div>
<div class="line">        }</div>
<div class="line">                </div>
<div class="line">        <span class="keywordtype">void</span> add_filter(<span class="keyword">const</span> <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::string</a>&amp; desc, <span class="keyword">const</span> <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::string</a>&amp; type)</div>
<div class="line">        {</div>
<div class="line">                <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/types/size_t.html">std::size_t</a> i = cb_types_.the_number_of_options();</div>
<div class="line">                cb_types_.push_back(desc);</div>
<div class="line">                <span class="keywordflow">if</span>(0 == i)</div>
<div class="line">                        cb_types_.option(0);</div>
<div class="line"></div>
<div class="line">                <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/container/vector.html">std::vector&lt;nana::string&gt;</a> v;</div>
<div class="line">                <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/types/size_t.html">std::size_t</a> beg = 0;</div>
<div class="line">                <span class="keywordflow">while</span>(<span class="keyword">true</span>)</div>
<div class="line">                {</div>
<div class="line">                        <span class="keyword">auto</span> pos = type.<a name="a49"></a><a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/find.html">find</a>(STR(<span class="charliteral">&#39;;&#39;</span>), beg);</div>
<div class="line">                        <span class="keyword">auto</span> ext = type.<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/substr.html">substr</a>(beg, pos == type.npos ? type.npos : pos - beg);</div>
<div class="line">                        <span class="keyword">auto</span> dot = ext.find(STR(<span class="charliteral">&#39;.&#39;</span>));</div>
<div class="line">                        <span class="keywordflow">if</span>((dot != ext.npos) &amp;&amp; (dot + 1 &lt; ext.size()))</div>
<div class="line">                        {</div>
<div class="line">                                ext.erase(0, dot + 1);</div>
<div class="line">                                <span class="keywordflow">if</span>(ext == STR(<span class="stringliteral">&quot;*&quot;</span>))</div>
<div class="line">                                {</div>
<div class="line">                                        v.<a name="a50"></a><a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/container/vector/clear.html">clear</a>();</div>
<div class="line">                                        <span class="keywordflow">break</span>;</div>
<div class="line">                                }</div>
<div class="line">                                <span class="keywordflow">else</span></div>
<div class="line">                                        v.<a name="a51"></a><a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/container/vector/push_back.html">push_back</a>(ext);</div>
<div class="line">                        }</div>
<div class="line">                        <span class="keywordflow">if</span>(pos == type.npos)</div>
<div class="line">                                <span class="keywordflow">break</span>;</div>
<div class="line">                        beg = pos + 1;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">if</span>(v.<a name="a52"></a><a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/container/vector/size.html">size</a>())</div>
<div class="line">                        cb_types_.anyobj(i, v);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordtype">bool</span> file(<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::string</a>&amp; fs)<span class="keyword"> const</span></div>
<div class="line"><span class="keyword">        </span>{</div>
<div class="line">                <span class="keywordflow">if</span>(selection_.type == kind::none)</div>
<div class="line">                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"></div>
<div class="line">                <span class="keyword">auto</span> pos = selection_.target.find_last_of(STR(<span class="stringliteral">&quot;\\/&quot;</span>));</div>
<div class="line">                <span class="keywordflow">if</span>(pos != selection_.target.npos)</div>
<div class="line">                        saved_selected_path = selection_.target.substr(0, pos);</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                        saved_selected_path.clear();</div>
<div class="line"></div>
<div class="line">                fs = selection_.target;</div>
<div class="line">                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">        }</div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">        <span class="keywordtype">void</span> _m_layout()</div>
<div class="line">        {</div>
<div class="line">                place_.bind(*<span class="keyword">this</span>);</div>
<div class="line">                place_.div(     <span class="stringliteral">&quot;vert&quot;</span></div>
<div class="line">                                <span class="stringliteral">&quot;&lt;weight=34 margin=5          path       arrange=[variable,200] gap=5 &gt;&quot;</span></div>
<div class="line">                                <span class="stringliteral">&quot;&lt;weight=30 margin=[0,0,5,10] new_folder arrange=[100]                &gt;&quot;</span></div>
<div class="line">                                <span class="stringliteral">&quot;&lt;                            content    arrange=[180]          gap=[5]&gt;&quot;</span></div>
<div class="line">                <span class="stringliteral">&quot;&lt;weight=8&gt;&quot;</span></div>
<div class="line">                                <span class="stringliteral">&quot;&lt;weight=26 &lt;weight=100&gt; &quot;</span></div>
<div class="line">                <span class="stringliteral">&quot;           &lt;weight=60 vert   label      margin=[0,0,0,5]&gt;&quot;</span></div>
<div class="line">                                <span class="stringliteral">&quot;           &lt;                 file       margin=[0,18,0,5] arrange=[variable,variable,190] gap=[10]&gt;&gt;&quot;</span></div>
<div class="line">                                <span class="stringliteral">&quot;&lt;weight=48 margin=[8,0,14]&lt;&gt;&quot;</span> );</div>
<div class="line"></div>
<div class="line">                place_.field( <span class="stringliteral">&quot;path&quot;</span> )      &lt;&lt; path_     <span class="comment">/*&lt;&lt;filter_*/</span>;</div>
<div class="line">                place_.field( <span class="stringliteral">&quot;new_folder&quot;</span> )&lt;&lt; btn_new_folder_ ;</div>
<div class="line">                place_.field( <span class="stringliteral">&quot;content&quot;</span> )   &lt;&lt; tree_  &lt;&lt;  ls_file_;</div>
<div class="line">                place_.field( <span class="stringliteral">&quot;label&quot;</span> )     &lt;&lt; lb_file_;</div>
<div class="line">                place_.field( <span class="stringliteral">&quot;file&quot;</span> )      &lt;&lt; tb_file_ &lt;&lt; cb_types_;</div>
<div class="line">                place_.collocate();</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordtype">void</span> _m_init_tree()</div>
<div class="line">        {</div>
<div class="line">                <span class="keyword">using namespace </span>nana::experimental::filesystem;</div>
<div class="line"></div>
<div class="line">                <span class="comment">//The path in linux start with the character &#39;/&#39;, the root key should be</span></div>
<div class="line">                <span class="comment">//&quot;FS.HOME&quot;, &quot;FS.ROOT&quot;. Because a key of the tree widget should not be &#39;/&#39;</span></div>
<div class="line">                <span class="keyword">auto</span> node_home = tree_.<a name="a53"></a><a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/insert.html">insert</a>(STR(<span class="stringliteral">&quot;FS.HOME&quot;</span>), STR(<span class="stringliteral">&quot;Home&quot;</span>));</div>
<div class="line">                node_home.value(kind::filesystem);</div>
<div class="line">                <span class="keyword">auto</span> node_filesystem = tree_.insert(STR(<span class="stringliteral">&quot;FS.ROOT&quot;</span>), STR(<span class="stringliteral">&quot;Filesystem&quot;</span>));</div>
<div class="line">                node_filesystem.value(kind::filesystem);</div>
<div class="line">                <span class="keyword">using</span> SubDirectories =  <a name="_a54"></a><a class="code" href="../../de/d1b/classnana_1_1experimental_1_1filesystem_1_1directory__iterator.html">directory_iterator</a>;</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; dir : SubDirectories{ <a class="code" href="../../d7/d51/namespacenana_1_1experimental_1_1filesystem.html#a27042983bad2acdf8815ecdcbbcabdb5">path_user</a>() })</div>
<div class="line">                {</div>
<div class="line">                        <span class="keywordflow">if</span> ( !<a class="code" href="../../d7/d51/namespacenana_1_1experimental_1_1filesystem.html#a04de6907684a4921d58402fc44a6a026">is_directory</a>(dir) || (dir.path().filename().size() &amp;&amp; dir.path().filename()[0] == <span class="charliteral">&#39;.&#39;</span>)) <span class="keywordflow">continue</span>;</div>
<div class="line"></div>
<div class="line">                        item_proxy node = tree_.insert(node_home, dir.path().filename(), dir.path().filename());</div>
<div class="line">                        <span class="keywordflow">if</span>( ! node.empty() )</div>
<div class="line">                        {</div>
<div class="line">                                node.value(dir); <span class="comment">//node.value(kind::filesystem);</span></div>
<div class="line">                                <span class="keywordflow">break</span>;</div>
<div class="line">                        }</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; dir : SubDirectories{ STR(<span class="stringliteral">&quot;/&quot;</span>) })</div>
<div class="line">                {</div>
<div class="line">                        <span class="keywordflow">if</span> ( !<a class="code" href="../../d7/d51/namespacenana_1_1experimental_1_1filesystem.html#a04de6907684a4921d58402fc44a6a026">is_directory</a>(dir) || (dir.path().filename().size() &amp;&amp; dir.path().filename()[0] == <span class="charliteral">&#39;.&#39;</span>)) <span class="keywordflow">continue</span>;</div>
<div class="line"></div>
<div class="line">                        item_proxy node = tree_.insert(node_home, dir.path().filename(), dir.path().filename());</div>
<div class="line">                        <span class="keywordflow">if</span>( ! node.empty() )</div>
<div class="line">                        {</div>
<div class="line">                                node.value(dir); <span class="comment">//node.value(kind::filesystem);</span></div>
<div class="line">                                <span class="keywordflow">break</span>;</div>
<div class="line">                        }</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                tree_.events().expanded.connect_unignorable([<span class="keyword">this</span>](<span class="keyword">const</span> <a name="_a55"></a><a class="code" href="../../df/df9/structnana_1_1arg__treebox.html">nana::arg_treebox</a>&amp; arg)</div>
<div class="line">                {</div>
<div class="line">                        _m_tr_expand(arg.<a name="a56"></a><a class="code" href="../../df/df9/structnana_1_1arg__treebox.html#ace88bdf3df5a36d0405f625648f96a4f">item</a>, arg.<a name="a57"></a><a class="code" href="../../df/df9/structnana_1_1arg__treebox.html#ad8e07298693767fbb840d04eefb20ce5">operated</a>);</div>
<div class="line">                });</div>
<div class="line"></div>
<div class="line">                tree_.events().selected.connect_unignorable([<span class="keyword">this</span>](<span class="keyword">const</span> <a class="code" href="../../df/df9/structnana_1_1arg__treebox.html">nana::arg_treebox</a>&amp; arg)</div>
<div class="line">                {</div>
<div class="line">                        <span class="keywordflow">if</span>(arg.<a class="code" href="../../df/df9/structnana_1_1arg__treebox.html#ad8e07298693767fbb840d04eefb20ce5">operated</a> &amp;&amp;  ! arg.<a class="code" href="../../df/df9/structnana_1_1arg__treebox.html#ace88bdf3df5a36d0405f625648f96a4f">item</a>.<a name="a58"></a><a class="code" href="../../d5/d96/classnana_1_1drawerbase_1_1treebox_1_1item__proxy.html#a510a3c6322ac8ab2612c6f7654881524">empty</a>() )</div>
<div class="line">                        {</div>
<div class="line">                                <span class="keyword">auto</span> <a name="_a59"></a><a class="code" href="../../dc/d03/classnana_1_1experimental_1_1filesystem_1_1path.html">path</a> = tree_.make_key_path(arg.<a class="code" href="../../df/df9/structnana_1_1arg__treebox.html#ace88bdf3df5a36d0405f625648f96a4f">item</a>, STR(<span class="stringliteral">&quot;/&quot;</span>)) + STR(<span class="stringliteral">&quot;/&quot;</span>);</div>
<div class="line">                                _m_resolute_path(<a class="code" href="../../dc/d03/classnana_1_1experimental_1_1filesystem_1_1path.html">path</a>);</div>
<div class="line">                                _m_load_cat_path(<a class="code" href="../../dc/d03/classnana_1_1experimental_1_1filesystem_1_1path.html">path</a>);</div>
<div class="line">                        }</div>
<div class="line">                });</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::string</a> _m_resolute_path(<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::string</a>&amp; <a class="code" href="../../dc/d03/classnana_1_1experimental_1_1filesystem_1_1path.html">path</a>)</div>
<div class="line">        {</div>
<div class="line">                <span class="keyword">auto</span> pos = path.<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/find.html">find</a>(STR(<span class="charliteral">&#39;/&#39;</span>));</div>
<div class="line">                <span class="keywordflow">if</span>(pos != path.npos)</div>
<div class="line">                {</div>
<div class="line">                        <span class="keyword">auto</span> begstr = path.<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/substr.html">substr</a>(0, pos);</div>
<div class="line">                        <span class="keywordflow">if</span>(begstr == STR(<span class="stringliteral">&quot;FS.HOME&quot;</span>))</div>
<div class="line">                                path.<a name="a60"></a><a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/replace.html">replace</a>(0, 7, <a class="code" href="../../d7/d51/namespacenana_1_1experimental_1_1filesystem.html#a27042983bad2acdf8815ecdcbbcabdb5">nana::experimental::filesystem::path_user</a>());</div>
<div class="line">                        <span class="keywordflow">else</span></div>
<div class="line">                                path.<a name="a61"></a><a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/erase.html">erase</a>(0, pos);</div>
<div class="line">                        <span class="keywordflow">return</span> begstr;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">return</span> <a name="a62"></a><a class="code" href="../../d2/d76/namespacenana.html#a2c61daedac4021de1dc57f8b5924a1b7">nana::string</a>();</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordtype">void</span> _m_load_path(<span class="keyword">const</span> <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::string</a>&amp; path)</div>
<div class="line">        {</div>
<div class="line">                addr_.filesystem = path;</div>
<div class="line">                <span class="keywordflow">if</span>(addr_.filesystem.size() &amp;&amp; addr_.filesystem[addr_.filesystem.size() - 1] != STR(<span class="charliteral">&#39;/&#39;</span>))</div>
<div class="line">                        addr_.filesystem += STR(<span class="charliteral">&#39;/&#39;</span>);</div>
<div class="line"></div>
<div class="line">                file_container_.clear();</div>
<div class="line"></div>
<div class="line">                <span class="keyword">using namespace </span>nana::experimental::filesystem;</div>
<div class="line">                <a name="_a63"></a><a class="code" href="../../d8/d05/structnana_1_1experimental_1_1filesystem_1_1attribute.html">attribute</a> fattr;</div>
<div class="line">                <a class="code" href="../../de/d1b/classnana_1_1experimental_1_1filesystem_1_1directory__iterator.html">directory_iterator</a> <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/iterator/end.html">end</a>;</div>
<div class="line">                <span class="keywordflow">for</span>(<a class="code" href="../../de/d1b/classnana_1_1experimental_1_1filesystem_1_1directory__iterator.html">directory_iterator</a> i(path); i != <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/iterator/end.html">end</a>; ++i)</div>
<div class="line">                {</div>
<div class="line">                        <span class="keywordflow">if</span>((i-&gt;path().filename().size() == 0) || (i-&gt;path().filename()[0] == STR(<span class="charliteral">&#39;.&#39;</span>)))</div>
<div class="line">                                <span class="keywordflow">continue</span>;</div>
<div class="line">                        item_fs m;</div>
<div class="line">                        m.name = i-&gt;path().filename();</div>
<div class="line">                        <span class="keywordflow">if</span>(<a class="code" href="../../d7/d51/namespacenana_1_1experimental_1_1filesystem.html#a95cda0238748303f649729103dbefd43">file_attrib</a>(path + m.name, fattr))</div>
<div class="line">                        {</div>
<div class="line">                                m.bytes = fattr.size;</div>
<div class="line">                                m.directory = fattr.directory;</div>
<div class="line">                                m.modified_time = fattr.modified;</div>
<div class="line">                        }</div>
<div class="line">                        <span class="keywordflow">else</span></div>
<div class="line">                        {</div>
<div class="line">                                m.bytes = 0;</div>
<div class="line">                                m.directory = i-&gt;attr.directory;</div>
<div class="line">                                <a class="code" href="../../d7/d51/namespacenana_1_1experimental_1_1filesystem.html#af2b5b7ddf1d4f5a8063fea514976699e">modified_file_time</a>(path + i-&gt;path().filename(), m.modified_time);</div>
<div class="line">                        }</div>
<div class="line"></div>
<div class="line">                        file_container_.push_back(m);</div>
<div class="line"></div>
<div class="line">                        <span class="keywordflow">if</span>(m.directory)</div>
<div class="line">                                path_.childset(m.name, 0);</div>
<div class="line">                }</div>
<div class="line">                <a name="a64"></a><a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/algorithm/sort.html">std::sort</a>(file_container_.begin(), file_container_.end(), pred_sort_fs());</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordtype">void</span> _m_load_cat_path(<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::string</a> path)</div>
<div class="line">        {</div>
<div class="line">                <span class="keywordflow">if</span>((path.<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/size.html">size</a>() == 0) || (path[path.<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/size.html">size</a>() - 1] != STR(<span class="charliteral">&#39;/&#39;</span>)))</div>
<div class="line">                        path += STR(<span class="charliteral">&#39;/&#39;</span>);</div>
<div class="line"></div>
<div class="line">                <span class="keyword">auto</span> beg_node = tree_.selected();</div>
<div class="line">                <span class="keywordflow">while</span>(!beg_node.empty() &amp;&amp; (beg_node != nodes_.home) &amp;&amp; (beg_node != nodes_.filesystem))</div>
<div class="line">                        beg_node = beg_node.owner();</div>
<div class="line">                        </div>
<div class="line">                <span class="keyword">auto</span> head = <a name="a65"></a><a class="code" href="../../d0/d83/namespacenana_1_1filesystem.html#a8b8c1d914b1e5aac44919a21605440f9">nana::filesystem::path_user</a>();</div>
<div class="line">                <span class="keywordflow">if</span>(path.<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/size.html">size</a>() &gt;= head.size() &amp;&amp; (path.<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/substr.html">substr</a>(0, head.size()) == head))</div>
<div class="line">                {<span class="comment">//This is HOME</span></div>
<div class="line">                        path_.caption(STR(<span class="stringliteral">&quot;HOME&quot;</span>));</div>
<div class="line">                        <span class="keywordflow">if</span>(beg_node != nodes_.home)</div>
<div class="line">                                nodes_.home-&gt;select(<span class="keyword">true</span>);</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                {       <span class="comment">//Redirect to &#39;/&#39;</span></div>
<div class="line">                        path_.caption(STR(<span class="stringliteral">&quot;FILESYSTEM&quot;</span>));</div>
<div class="line">                        <span class="keywordflow">if</span>(beg_node != nodes_.filesystem)</div>
<div class="line">                                nodes_.filesystem-&gt;select(<span class="keyword">true</span>);</div>
<div class="line">                        head.clear();</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span>(head.size() == 0 || head[head.size() - 1] != STR(<span class="charliteral">&#39;/&#39;</span>))</div>
<div class="line">                        head += STR(<span class="charliteral">&#39;/&#39;</span>);</div>
<div class="line"></div>
<div class="line">                <a class="code" href="../../de/d1b/classnana_1_1experimental_1_1filesystem_1_1directory__iterator.html">nana::experimental::filesystem::directory_iterator</a> <a name="a66"></a><a class="code" href="../../d2/d76/namespacenana.html#a1480f163a64163d468bcdd3d8dd16c25a7f021a1415b86f2d013b2618fb31ae53">end</a>;</div>
<div class="line">                <span class="keywordflow">for</span>(<a class="code" href="../../de/d1b/classnana_1_1experimental_1_1filesystem_1_1directory__iterator.html">nana::experimental::filesystem::directory_iterator</a> i(head); i != <a class="code" href="../../d2/d76/namespacenana.html#a1480f163a64163d468bcdd3d8dd16c25a7f021a1415b86f2d013b2618fb31ae53">end</a>; ++i)</div>
<div class="line">                {</div>
<div class="line">                        <span class="keywordflow">if</span>(i-&gt;directory)</div>
<div class="line">                                path_.childset(i-&gt;path().name(), 0);</div>
<div class="line">                }</div>
<div class="line">                <span class="keyword">auto</span> cat_path = path_.caption();</div>
<div class="line">                <span class="keywordflow">if</span>(cat_path.size() &amp;&amp; cat_path[cat_path.size() - 1] != STR(<span class="charliteral">&#39;/&#39;</span>))</div>
<div class="line">                        cat_path += STR(<span class="charliteral">&#39;/&#39;</span>);</div>
<div class="line"></div>
<div class="line">                <span class="keyword">auto</span> beg = head.size();</div>
<div class="line">                <span class="keywordflow">while</span>(<span class="keyword">true</span>)</div>
<div class="line">                {</div>
<div class="line">                        <span class="keyword">auto</span> pos = path.<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/find.html">find</a>(STR(<span class="charliteral">&#39;/&#39;</span>), beg);</div>
<div class="line">                        <span class="keyword">auto</span> folder = path.<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/substr.html">substr</a>(beg, pos != path.npos ? pos - beg: path.npos);</div>
<div class="line">                        <span class="keywordflow">if</span>(folder.size() == 0) <span class="keywordflow">break</span>;</div>
<div class="line">                        (cat_path += folder) += STR(<span class="charliteral">&#39;/&#39;</span>);</div>
<div class="line">                        (head += folder) += STR(<span class="charliteral">&#39;/&#39;</span>);</div>
<div class="line">                        path_.caption(cat_path);</div>
<div class="line">                                </div>
<div class="line">                        <span class="keywordflow">for</span>(<a class="code" href="../../de/d1b/classnana_1_1experimental_1_1filesystem_1_1directory__iterator.html">nana::experimental::filesystem::directory_iterator</a> i(head); i != <a class="code" href="../../d2/d76/namespacenana.html#a1480f163a64163d468bcdd3d8dd16c25a7f021a1415b86f2d013b2618fb31ae53">end</a>; ++i)</div>
<div class="line">                        {</div>
<div class="line">                                <span class="keywordflow">if</span>(i-&gt;directory)</div>
<div class="line">                                        path_.childset(i-&gt;path().name(), 0);</div>
<div class="line">                        }</div>
<div class="line"></div>
<div class="line">                        <span class="keywordflow">if</span>(pos == path.npos)</div>
<div class="line">                                <span class="keywordflow">break</span>;</div>
<div class="line">                        beg = pos + 1;</div>
<div class="line">                }</div>
<div class="line">                _m_load_path(path);</div>
<div class="line">                _m_list_fs();</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordtype">bool</span> _m_filter_allowed(<span class="keyword">const</span> <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::string</a>&amp; name, <span class="keywordtype">bool</span> is_dir, <span class="keyword">const</span> <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::string</a>&amp; filter, <span class="keyword">const</span> <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/container/vector.html">std::vector&lt;nana::string&gt;</a>* extension)<span class="keyword"> const</span></div>
<div class="line"><span class="keyword">        </span>{</div>
<div class="line">                <span class="keywordflow">if</span>(filter.<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/size.html">size</a>() &amp;&amp; (name.<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/find.html">find</a>(filter) == filter.npos))</div>
<div class="line">                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span>((is_dir || 0 == extension) || (0 == extension-&gt;<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/container/vector/size.html">size</a>())) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">for</span>(<span class="keyword">auto</span> &amp; extstr : *extension)</div>
<div class="line">                {</div>
<div class="line">                        <span class="keyword">auto</span> pos = name.<a name="a67"></a><a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/rfind.html">rfind</a>(extstr);</div>
<div class="line">                        <span class="keywordflow">if</span>((pos != name.npos) &amp;&amp; (name.<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/size.html">size</a>() == pos + extstr.size()))</div>
<div class="line">                                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordtype">void</span> _m_list_fs()</div>
<div class="line">        {</div>
<div class="line">                <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::string</a> filter = filter_.caption();</div>
<div class="line">                ls_file_.auto_draw(<span class="keyword">false</span>);</div>
<div class="line"></div>
<div class="line">                ls_file_.<a name="a68"></a><a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/clear.html">clear</a>();</div>
<div class="line"></div>
<div class="line">                <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/container/vector.html">std::vector&lt;nana::string&gt;</a>* ext_types = cb_types_.anyobj&lt;<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/container/vector.html">std::vector&lt;nana::string&gt;</a> &gt;(cb_types_.option());</div>
<div class="line">                <span class="keyword">auto</span> cat = ls_file_.<a name="a69"></a><a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/container/vector/at.html">at</a>(0);</div>
<div class="line">                <span class="keywordflow">for</span>(<span class="keyword">auto</span> &amp; fs: file_container_)</div>
<div class="line">                {</div>
<div class="line">                        <span class="keywordflow">if</span>(_m_filter_allowed(fs.name, fs.directory, filter, ext_types))</div>
<div class="line">                        {</div>
<div class="line">                                cat.append(fs).value(fs);</div>
<div class="line">                        }</div>
<div class="line">                }</div>
<div class="line">                ls_file_.auto_draw(<span class="keyword">true</span>);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordtype">void</span> _m_finish(kind type, <span class="keyword">const</span> <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::string</a>&amp; tar)</div>
<div class="line">        {</div>
<div class="line">                selection_.target = tar;</div>
<div class="line">                selection_.type = type;</div>
<div class="line">                <a name="a70"></a><a class="code" href="../../d9/dd8/classnana_1_1widget.html#aecfb50bd898767bc6ef54eeb56d0f2cd">close</a>();</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keyword">struct </span>folder_creator</div>
<div class="line">        {</div>
<div class="line">                folder_creator(file_explorer&amp; fb, form &amp; fm, <a class="code" href="../../de/d10/classnana_1_1textbox.html">nana::textbox</a>&amp; tx)</div>
<div class="line">                        :       fb_(fb), fm_(fm), tx_path_(tx)</div>
<div class="line">                {}</div>
<div class="line"></div>
<div class="line">                <span class="keywordtype">void</span> operator()()</div>
<div class="line">                {</div>
<div class="line">                        <span class="keyword">auto</span> path = tx_path_.caption();</div>
<div class="line"></div>
<div class="line">                        <a name="_a71"></a><a class="code" href="../../d8/d97/classnana_1_1msgbox.html">nana::msgbox</a> mb(fm_, STR(<span class="stringliteral">&quot;Create Folder&quot;</span>));</div>
<div class="line">                        mb.<a name="a72"></a><a class="code" href="../../d8/d97/classnana_1_1msgbox.html#aa7a087be7daafa4ffcfe17a64cceee14">icon</a>(<a name="a73"></a><a class="code" href="../../d8/d97/classnana_1_1msgbox.html#a31f60532b1939da3197181648f1fe803a1bc4facabb63187924f07f2653e9d17a">nana::msgbox::icon_warning</a>);</div>
<div class="line">                        <span class="keywordflow">if</span>(0 == path.<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/size.html">size</a>() || path[0] == STR(<span class="charliteral">&#39;.&#39;</span>) || path[0] == STR(<span class="charliteral">&#39;/&#39;</span>))</div>
<div class="line">                        {</div>
<div class="line">                                mb&lt;&lt;STR(<span class="stringliteral">&quot;Please input a valid name for the new folder.&quot;</span>);</div>
<div class="line">                                mb();</div>
<div class="line">                                <span class="keywordflow">return</span>;</div>
<div class="line">                        }</div>
<div class="line">                                </div>
<div class="line">                        <span class="keywordtype">bool</span> if_exist;</div>
<div class="line">                        <span class="keywordflow">if</span>(<span class="keyword">false</span> == <a name="a74"></a><a class="code" href="../../d0/d83/namespacenana_1_1filesystem.html#ad368c2eba68ac32e6f3cf81ec2f099ff">nana::filesystem::mkdir</a>(fb_.addr_.filesystem + path, if_exist))</div>
<div class="line">                        {</div>
<div class="line">                                <span class="keywordflow">if</span>(if_exist)</div>
<div class="line">                                        mb&lt;&lt;STR(<span class="stringliteral">&quot;The folder is existing, please rename it.&quot;</span>);</div>
<div class="line">                                <span class="keywordflow">else</span></div>
<div class="line">                                        mb&lt;&lt;STR(<span class="stringliteral">&quot;Failed to create the folder, please rename it.&quot;</span>);</div>
<div class="line">                                mb();</div>
<div class="line">                                <span class="keywordflow">return</span>;</div>
<div class="line">                        }</div>
<div class="line">                        fb_._m_load_cat_path(fb_.addr_.filesystem);</div>
<div class="line">                        fm_.close();</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                file_explorer&amp; fb_;</div>
<div class="line">                form&amp; fm_;</div>
<div class="line">                <a class="code" href="../../de/d10/classnana_1_1textbox.html">nana::textbox</a> &amp; tx_path_;</div>
<div class="line">        };</div>
<div class="line"></div>
<div class="line">        <span class="keywordtype">bool</span> _m_append_def_extension(<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::string</a>&amp; tar)<span class="keyword"> const</span></div>
<div class="line"><span class="keyword">        </span>{</div>
<div class="line">                <span class="keyword">auto</span> dotpos = tar.<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/find_last_of.html">find_last_of</a>(STR(<span class="charliteral">&#39;.&#39;</span>));</div>
<div class="line">                <span class="keywordflow">if</span>(dotpos != tar.npos)</div>
<div class="line">                {</div>
<div class="line">                        <span class="keyword">auto</span> pos = tar.<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/find_last_of.html">find_last_of</a>(STR(<span class="stringliteral">&quot;/\\&quot;</span>));</div>
<div class="line">                        <span class="keywordflow">if</span>(pos == tar.npos || pos &lt; dotpos)</div>
<div class="line">                                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/container/vector.html">std::vector&lt;nana::string&gt;</a> * exts = cb_types_.anyobj&lt;<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/container/vector.html">std::vector&lt;nana::string&gt;</a> &gt;(cb_types_.option());</div>
<div class="line">                <span class="keywordflow">if</span>(0 == exts || exts-&gt;<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/container/vector/size.html">size</a>() == 0)      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">                        </div>
<div class="line">                <span class="keyword">auto</span> &amp; ext = exts-&gt;<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/container/vector/at.html">at</a>(0);</div>
<div class="line">                tar += ext;</div>
<div class="line">                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">        }</div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">        <span class="keywordtype">void</span> _m_sel_file(<span class="keyword">const</span> <a class="code" href="../../d6/d7c/structnana_1_1arg__mouse.html">nana::arg_mouse</a>&amp; arg)</div>
<div class="line">        {</div>
<div class="line">                <span class="keyword">auto</span> sel = ls_file_.selected();</div>
<div class="line">                <span class="keywordflow">if</span>(sel.empty())</div>
<div class="line">                        <span class="keywordflow">return</span>;</div>
<div class="line">                        </div>
<div class="line">                <span class="keyword">auto</span> index = sel[0];</div>
<div class="line">                item_fs m;</div>
<div class="line">                ls_file_.<a name="a75"></a><a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/at.html">at</a>(index).resolve_to(m);</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span>(<a name="a76"></a><a class="code" href="../../d2/d76/namespacenana.html#aec14d9a922f2b2a5c52680e6f4c9c2d3a37a3fa88c30e2a0f1273bc62a9cb1aae">nana::event_code::dbl_click</a> == arg.<a name="a77"></a><a class="code" href="../../d6/d7c/structnana_1_1arg__mouse.html#ab4ccd944991ce063e6eb1cf736c29b82">evt_code</a>)</div>
<div class="line">                {</div>
<div class="line">                        <span class="keywordflow">if</span>(m.directory)</div>
<div class="line">                                _m_load_cat_path(addr_.filesystem + m.name + STR(<span class="stringliteral">&quot;/&quot;</span>));</div>
<div class="line">                        <span class="keywordflow">else</span></div>
<div class="line">                                _m_finish(kind::filesystem, addr_.filesystem + m.name);</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                {</div>
<div class="line">                        <span class="keywordflow">if</span>(<span class="keyword">false</span> == m.directory)</div>
<div class="line">                        {</div>
<div class="line">                                selection_.target = addr_.filesystem + m.name;</div>
<div class="line">                                tb_file_.caption(m.name);</div>
<div class="line">                        }</div>
<div class="line">                }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordtype">void</span> _m_ok()</div>
<div class="line">        {</div>
<div class="line">                <span class="keywordflow">if</span>(0 == selection_.target.size())</div>
<div class="line">                {</div>
<div class="line">                        <span class="keyword">auto</span> file = tb_file_.caption();</div>
<div class="line">                        <span class="keywordflow">if</span>(file.size())</div>
<div class="line">                        {</div>
<div class="line">                                <span class="keywordflow">if</span>(file[0] == STR(<span class="charliteral">&#39;.&#39;</span>))</div>
<div class="line">                                {</div>
<div class="line">                                        <a class="code" href="../../d8/d97/classnana_1_1msgbox.html">nana::msgbox</a> mb(*<span class="keyword">this</span>, <a class="code" href="../../d9/dd8/classnana_1_1widget.html#ab4a216a092654c3c539d00fb1db76934">caption</a>());</div>
<div class="line">                                        mb.<a class="code" href="../../d8/d97/classnana_1_1msgbox.html#aa7a087be7daafa4ffcfe17a64cceee14">icon</a>(<a class="code" href="../../d8/d97/classnana_1_1msgbox.html#a31f60532b1939da3197181648f1fe803a1bc4facabb63187924f07f2653e9d17a">nana::msgbox::icon_warning</a>);</div>
<div class="line">                                        mb&lt;&lt;file&lt;&lt;<a name="a78"></a><a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/io/manip/endl.html">std::endl</a>&lt;&lt;STR(<span class="stringliteral">&quot;The filename is invalid.&quot;</span>);</div>
<div class="line">                                        mb();</div>
<div class="line">                                        <span class="keywordflow">return</span>;</div>
<div class="line">                                }</div>
<div class="line">                                <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::string</a> tar;</div>
<div class="line">                                <span class="keywordflow">if</span>(file[0] == STR(<span class="charliteral">&#39;/&#39;</span>))</div>
<div class="line">                                        tar = file;</div>
<div class="line">                                <span class="keywordflow">else</span></div>
<div class="line">                                        tar = addr_.filesystem + file;</div>
<div class="line"></div>
<div class="line">                                <span class="keywordtype">bool</span> good = <span class="keyword">true</span>;</div>
<div class="line">                                <a name="_a79"></a><a class="code" href="../../df/d6b/structnana_1_1filesystem_1_1attribute.html">nana::filesystem::attribute</a> attr;</div>
<div class="line">                                <span class="keywordflow">if</span>(<a name="a80"></a><a class="code" href="../../d0/d83/namespacenana_1_1filesystem.html#a0f9b78b545eca2dcbb1765e942597dca">nana::filesystem::file_attrib</a>(tar, attr) == <span class="keyword">false</span>)</div>
<div class="line">                                {</div>
<div class="line">                                        <span class="keywordflow">if</span>(_m_append_def_extension(tar))</div>
<div class="line">                                                good = <a class="code" href="../../d0/d83/namespacenana_1_1filesystem.html#a0f9b78b545eca2dcbb1765e942597dca">nana::filesystem::file_attrib</a>(tar, attr);</div>
<div class="line">                                        <span class="keywordflow">else</span></div>
<div class="line">                                                good = <span class="keyword">false</span>;</div>
<div class="line">                                }</div>
<div class="line">                                        </div>
<div class="line">                                <span class="keywordflow">if</span>(good &amp;&amp; attr.<a name="a81"></a><a class="code" href="../../df/d6b/structnana_1_1filesystem_1_1attribute.html#ae2a7d8e30b8bec36e60a7bbd658f56f5">is_directory</a>)</div>
<div class="line">                                {</div>
<div class="line">                                        _m_load_cat_path(tar);</div>
<div class="line">                                        tb_file_.caption(STR(<span class="stringliteral">&quot;&quot;</span>));</div>
<div class="line">                                        <span class="keywordflow">return</span>;</div>
<div class="line">                                }</div>
<div class="line">                                        </div>
<div class="line">                                {</div>
<div class="line">                                        <span class="keywordflow">if</span>(good)</div>
<div class="line">                                        {</div>
<div class="line">                                                <a class="code" href="../../d8/d97/classnana_1_1msgbox.html">nana::msgbox</a> mb(*<span class="keyword">this</span>, <a class="code" href="../../d9/dd8/classnana_1_1widget.html#ab4a216a092654c3c539d00fb1db76934">caption</a>(), <a name="a82"></a><a class="code" href="../../d8/d97/classnana_1_1msgbox.html#a305112845be74452713ff42e871a21f2a358de86da7da377bd12ac4febaaec55e">nana::msgbox::yes_no</a>);</div>
<div class="line">                                                mb.<a class="code" href="../../d8/d97/classnana_1_1msgbox.html#aa7a087be7daafa4ffcfe17a64cceee14">icon</a>(<a name="a83"></a><a class="code" href="../../d8/d97/classnana_1_1msgbox.html#a31f60532b1939da3197181648f1fe803a6543efef522647218229fab72b80dc0b">nana::msgbox::icon_question</a>);</div>
<div class="line">                                                mb&lt;&lt;STR(<span class="stringliteral">&quot;The input file is existing, do you want to overwrite it?&quot;</span>);</div>
<div class="line">                                                <span class="keywordflow">if</span>(<a name="a84"></a><a class="code" href="../../d8/d97/classnana_1_1msgbox.html#a4f96465b7fc07ca07e5ebe969c9991f5a2912f588106a9a1531603d6c5959ffac">nana::msgbox::pick_no</a> == mb())</div>
<div class="line">                                                        <span class="keywordflow">return</span>;</div>
<div class="line">                                        }</div>
<div class="line">                                        _m_finish(kind::filesystem, tar);</div>
<div class="line">                                }</div>
<div class="line">                        }</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                        _m_finish(kind::filesystem, selection_.target);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordtype">void</span> _m_tr_expand(item_proxy node, <span class="keywordtype">bool</span> <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/numeric/math/exp.html">exp</a>)</div>
<div class="line">        {</div>
<div class="line">                <span class="keywordflow">if</span>(<span class="keyword">false</span> == exp) <span class="keywordflow">return</span>;</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span>( ! node.empty())</div>
<div class="line">                {</div>
<div class="line">                        <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::string</a> path = tree_.make_key_path(node, STR(<span class="stringliteral">&quot;/&quot;</span>)) + STR(<span class="stringliteral">&quot;/&quot;</span>);</div>
<div class="line">                        _m_resolute_path(path);</div>
<div class="line"></div>
<div class="line">                        nana::filesystem::directory_iterator <a class="code" href="../../d2/d76/namespacenana.html#a1480f163a64163d468bcdd3d8dd16c25a7f021a1415b86f2d013b2618fb31ae53">end</a>;</div>
<div class="line">                        <span class="keywordflow">for</span>(nana::filesystem::directory_iterator i(path); i != <a class="code" href="../../d2/d76/namespacenana.html#a1480f163a64163d468bcdd3d8dd16c25a7f021a1415b86f2d013b2618fb31ae53">end</a>; ++i)</div>
<div class="line">                        {</div>
<div class="line">                                <span class="keywordflow">if</span>((<span class="keyword">false</span> == i-&gt;directory) || (i-&gt;path().name().size() &amp;&amp; i-&gt;path().name()[0] == <span class="charliteral">&#39;.&#39;</span>)) <span class="keywordflow">continue</span>;</div>
<div class="line">                                <span class="keyword">auto</span> child = node.append(i-&gt;path().name(), i-&gt;path().name(), *i);</div>
<div class="line">                                <span class="keywordflow">if</span>(!child.empty())</div>
<div class="line">                                {</div>
<div class="line">                                        <span class="keywordflow">for</span>(nana::filesystem::directory_iterator u(path + i-&gt;path().name()); u != <a class="code" href="../../d2/d76/namespacenana.html#a1480f163a64163d468bcdd3d8dd16c25a7f021a1415b86f2d013b2618fb31ae53">end</a>; ++u)</div>
<div class="line">                                        {</div>
<div class="line">                                                <span class="keywordflow">if</span>(! u-&gt;directory || (u-&gt;path().name().size() &amp;&amp; u-&gt;path().name()[0] == <span class="charliteral">&#39;.&#39;</span>)) <span class="keywordflow">continue</span>;</div>
<div class="line"></div>
<div class="line">                                                child.append(u-&gt;path().name(), u-&gt;path().name(), *i);</div>
<div class="line">                                                <span class="keywordflow">break</span>;</div>
<div class="line">                                        }</div>
<div class="line">                                }</div>
<div class="line">                        }</div>
<div class="line">                }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">};<span class="comment">//end class filebox_implement</span></div>
<div class="line"></div>
<div class="line"><a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::string</a> file_explorer::saved_init_path;</div>
<div class="line"><a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">nana::string</a> file_explorer::saved_selected_path;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">using namespace </span>nana;</div>
<div class="line">    file_explorer fb;</div>
<div class="line">        fb.add_filter(STR(<span class="stringliteral">&quot;Text File&quot;</span>), STR(<span class="stringliteral">&quot;*.text;*.doc&quot;</span>));</div>
<div class="line">        fb.add_filter(STR(<span class="stringliteral">&quot;All Files&quot;</span>), STR(<span class="stringliteral">&quot;*.*&quot;</span>));</div>
<div class="line">    fb.show();</div>
<div class="line">    <a name="a85"></a><a class="code" href="../../d2/d76/namespacenana.html#adfeaf4a48fd8f02161268cde0ae797d9">nana::exec</a>();</div>
<div class="line">    <span class="keywordtype">char</span> a;</div>
<div class="line">    <a name="_a86"></a><a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/io/basic_istream.html">std::cin</a> &gt;&gt; a;</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Nana C++ Library. Reference for users.: Getting Started</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Nana C++ Library. Reference for users.
   </div>
   <div id="projectbrief">What we need to use nana</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('da/db9/md__c_1__prog__ext_lib_nana-docs_source_02-_getting__started.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Getting Started </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#exam">Examples</a><ul><li class="level2"><a href="#HelloN">Hello Nana</a></li>
<li class="level2"><a href="#Event">Responding an Event</a></li>
<li class="level2"><a href="#notepad">Simple Notepad</a></li>
</ul>
</li>
<li class="level1"><a href="#Functor">Function Objects</a><ul><li class="level2"><a href="#Predefined">Predefined Function Objects (is this in use?)</a></li>
<li class="level2"><a href="#Lambda">The Lambda Expression</a></li>
</ul>
</li>
<li class="level1"><a href="#forms">Creating forms</a><ul><li class="level2"><a href="#der">Defining a form through Derivation</a></li>
<li class="level2"><a href="#loader">Creating An Instance of the Form with form_loader<form>()</a></li>
<li class="level2"><a href="#mmodal">Modal Form</a></li>
</ul>
</li>
<li class="level1"><a href="#appear_doc">Appearance of Window</a></li>
<li class="level1"><a href="#event">Event Handling</a><ul><li class="level2"><a href="#reg">Registering and Unregistering an Event</a></li>
<li class="level2"><a href="#eve">Events</a><ul><li class="level3"><a href="#mous">Mouse Events</a></li>
<li class="level3"><a href="#Keyboard">Keyboard Events</a></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><a href="#PNG">Enable the PNG support for Nana C++ Library</a></li>
<li class="level1"><a href="#msg">Message box</a></li>
<li class="level1"><a href="#icon">Window Icon</a></li>
</ul>
</div>
<div class="textblock"><p>See also:</p>
<ul>
<li><a href="http://nanaproject.wordpress.com/2011/03/20/clone_method/">An application of Clone Method to Nana C++ Library</a> (March 20, 2011 )</li>
<li><a href="http://nanaproject.wordpress.com/2012/04/17/an-introduction-to-the-image-processing-interfaces-from-release-of-0-2-2/">An introduction to the image processing interfaces from release of 0.2.2</a> (April 17, 2012)</li>
<li><a href="http://nanaproject.wordpress.com/2012/02/22/blending-images/">Blending Images</a> (February 22, 2012)</li>
<li><a href="https://nanaproject.wordpress.com/2012/06/18/introduce-to-the-support-of-bidirectional-language/">Introduction to The Support of Bidirectional Language</a> (June 18, 2012)</li>
<li><a href="https://sourceforge.net/p/nanapro/blog/2013/03/nana-tutorial-creating-a-gui-calculator/">Nana Tutorial: Creating A GUI Calculator</a> (2013-03-03 )</li>
<li><a href="http://nanapro.sourceforge.net/help/tutorials/thefreeme.htm">The FreeMe</a></li>
<li>Demo of Nana C++ Library</li>
<li>See the examples in this documentation.</li>
</ul>
<h1><a class="anchor" id="exam"></a>
Examples</h1>
<p>This chapter shows how to create an small graphical user interface (GUI) application with Nana C++ Library.</p>
<h2><a class="anchor" id="HelloN"></a>
Hello Nana</h2>
<p>Let's start with a simple program, we will study it line by line.</p>
<div class="fragment"><div class="line">1 #include &lt;nana/gui/wvl.hpp&gt; </div>
<div class="line">2 #include &lt;nana/gui/widgets/label.hpp&gt; </div>
<div class="line">3 <span class="keywordtype">int</span> main() </div>
<div class="line">4 { </div>
<div class="line">5       <a class="code" href="../../d6/d57/classnana_1_1form.html">nana::form</a> form; </div>
<div class="line">6       <a class="code" href="../../dd/d8c/classnana_1_1label.html">nana::label</a> label(form, <a class="code" href="../../dd/d2d/structnana_1_1rectangle.html">nana::rectangle</a>(0, 0, 100, 20)); </div>
<div class="line">7       label.caption(<span class="stringliteral">&quot;Hello Nana&quot;</span>);</div>
<div class="line">8       form.<a class="code" href="../../d9/dd8/classnana_1_1widget.html#aa6bc5708ecaff3ede2945d19797394d5">show</a>(); </div>
<div class="line">9       <a class="code" href="../../d2/d76/namespacenana.html#adfeaf4a48fd8f02161268cde0ae797d9">nana::exec</a>(); </div>
<div class="line">  } </div>
</div><!-- fragment --><p>Lines 1 and 2 include the definitions of class <code>form</code> and class <code>label</code> in namespace <code>nana</code>. Every GUI application written with Nana C++ Library must include the header file <code>nana/gui/wvl.hpp</code>.</p>
<p>Line 5 defines a <code><a class="el" href="../../d6/d57/classnana_1_1form.html" title="Pop-up window. Is different from other window widgets: its default constructor create the window...">nana::form</a> object</code>. It is a window used for placing a label widget in this example.</p>
<p>Line 6 defines a <code><a class="el" href="../../dd/d8c/classnana_1_1label.html" title="Define a label widget (can dispaly a formated text string and images). Provides the interfaces to be ...">nana::label</a></code> object to display a text string. The label object is created in the form. A widget is a visual element in the user interface.</p>
<p>Line 7 sets the caption of the label object. Every widget has a caption for displaying a title.</p>
<p>Line 8 makes the form visible.</p>
<p>Line 9 passes the control of the application to Nana. At this point, the program enters the event loop for waiting for and receiving a user action, such as mouse move, mouse click and keyboard press. The function <code><a class="el" href="../../d2/d76/namespacenana.html#adfeaf4a48fd8f02161268cde0ae797d9">nana::exec</a></code> blocks till <code>form</code> is destroyed, and what the example demonstrate is that the program exits when a user closes the window.</p>
<div class="image">
<img src="../../HelloNana.jpg" alt="HelloNana.jpg"/>
<div class="caption">
Figure 1.1 Hello Nana</div></div>
<p> Now, you can run the program on your own machine. But firstly you should have Nana C++ Library installed in your system. A method to install is explained in <a href="http://nanapro.org/en-us/help/instl_lib_doc.htm">Installation Library Documentation</a> in Nana Programmer`s Guide or <a href="https://github.com/qPCR4vir/nana-docs/wiki/Installation">in the wiki</a></p>
<h2><a class="anchor" id="Event"></a>
Responding an Event</h2>
<p>The second example shows how to respond a user action. To receive a user action, an event handler should be registered to a widget. Nana waits for a user action and invokes the event handler of the corresponding event. The example application consists of a button that the user can click to quit.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include&lt;nana/gui/wvl.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;nana/gui/widgets/button.hpp&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line"> {</div>
<div class="line">     <span class="keyword">using namespace </span>nana;</div>
<div class="line"></div>
<div class="line">     form fm;</div>
<div class="line">     fm.<a class="code" href="../../d9/dd8/classnana_1_1widget.html#a0610784be2de178e608a78f2aae1eb0a">caption</a>(<span class="stringliteral">&quot;Hello World&quot;</span>);</div>
<div class="line">     <a class="code" href="../../d7/dc0/classnana_1_1button.html">button</a> btn(fm, <a class="code" href="../../dd/d2d/structnana_1_1rectangle.html">nana::rectangle</a>(20, 20, 150, 30));</div>
<div class="line">     btn.caption(<span class="stringliteral">&quot;Quit&quot;</span>);</div>
<div class="line">     btn.events().click(<a class="code" href="../../d5/d1e/namespacenana_1_1_a_p_i.html#af71ebb2dae084addc00732fa58116545">API::exit</a>);</div>
<div class="line">     fm.show();</div>
<div class="line">     <a class="code" href="../../d2/d76/namespacenana.html#adfeaf4a48fd8f02161268cde0ae797d9">exec</a>();</div>
<div class="line"> }</div>
</div><!-- fragment --><p> This source code is similar to Hello Nana, except that we are using a button instead of a label, and we are making an event to respond a user click. Every widget class has a set of methods to make events, they are named "events()". The parameter of the member function is an event handler. As above code shown, we make the <code>API::exit()</code> as an event handler for the button's click event. The <code>exit()</code> function is an API in Nana C++ Library. It closes all windows in current GUI thread and terminates the event loop. It will be called when the user clicks the button.</p>
<div class="image">
<img src="../../Quit.jpg" alt="Quit.jpg"/>
<div class="caption">
Figure 1.2 Event Example</div></div>
<h2><a class="anchor" id="notepad"></a>
Simple Notepad</h2>
<p>This is an small but working notepad:</p>
<div class="fragment"><div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;nana/gui.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;nana/gui/widgets/menubar.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;nana/gui/widgets/textbox.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;nana/gui/place.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;nana/gui/msgbox.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;nana/gui/filebox.hpp&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">using namespace </span>nana;</div>
<div class="line"></div>
<div class="line"><span class="keyword">class </span>notepad_form     : <span class="keyword">public</span> form</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="../../dc/de3/classnana_1_1place.html">place</a>   place_  {*<span class="keyword">this</span>};</div>
<div class="line">    <a class="code" href="../../d3/dc0/classnana_1_1menubar.html">menubar</a> menubar_{*<span class="keyword">this</span>};</div>
<div class="line">    <a class="code" href="../../de/d10/classnana_1_1textbox.html">textbox</a> textbox_{*<span class="keyword">this</span>};</div>
<div class="line"></div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    notepad_form()</div>
<div class="line">    {</div>
<div class="line">        caption(<span class="stringliteral">&quot;Simple Notepad - Nana C++ Library&quot;</span>);</div>
<div class="line">        textbox_.borderless(<span class="keyword">true</span>);</div>
<div class="line">        <a class="code" href="../../d5/d1e/namespacenana_1_1_a_p_i.html#a8332c91717239dba95a9be1393eb9c94">API::effects_edge_nimbus</a>(textbox_, <a class="code" href="../../db/dca/namespacenana_1_1effects.html#af2f1254faa14bc6b00a9d3f4987aebd9a334c4a4c42fdb79d7ebc3e73b517e6f8">effects::edge_nimbus::none</a>);</div>
<div class="line">        textbox_.enable_dropfiles(<span class="keyword">true</span>);</div>
<div class="line">        textbox_.events().mouse_dropfiles([<span class="keyword">this</span>](<span class="keyword">const</span> <a class="code" href="../../df/d14/structnana_1_1arg__dropfiles.html">arg_dropfiles</a>&amp; arg)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (arg.<a class="code" href="../../df/d14/structnana_1_1arg__dropfiles.html#a424d0a4845477466524f020d0c1e2dcf">files</a>.<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/container/vector/size.html">size</a>() &amp;&amp; _m_ask_save())</div>
<div class="line">                textbox_.load(arg.<a class="code" href="../../df/d14/structnana_1_1arg__dropfiles.html#a424d0a4845477466524f020d0c1e2dcf">files</a>.<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/container/vector/at.html">at</a>(0).data());</div>
<div class="line">        });</div>
<div class="line"></div>
<div class="line">        _m_make_menus();</div>
<div class="line"></div>
<div class="line">        place_.div(<span class="stringliteral">&quot;vert&lt;menubar weight=28&gt;&lt;textbox&gt;&quot;</span>);</div>
<div class="line">        place_[<span class="stringliteral">&quot;menubar&quot;</span>] &lt;&lt; menubar_;</div>
<div class="line">        place_[<span class="stringliteral">&quot;textbox&quot;</span>] &lt;&lt; textbox_;</div>
<div class="line">        place_.collocate();</div>
<div class="line"></div>
<div class="line">        <a class="code" href="../../d5/d1e/namespacenana_1_1_a_p_i.html#a0a5fa378a313bd333b3ab8ae86d69bcc">events</a>().unload([<span class="keyword">this</span>](<span class="keyword">const</span> <a class="code" href="../../d0/d2c/structnana_1_1arg__unload.html">arg_unload</a>&amp; arg){</div>
<div class="line">            <span class="keywordflow">if</span> (!_m_ask_save())</div>
<div class="line">                arg.<a class="code" href="../../d0/d2c/structnana_1_1arg__unload.html#ab5228dd3e0e98380b6f869c2419ce063">cancel</a> = <span class="keyword">true</span>;</div>
<div class="line">        });</div>
<div class="line">    }</div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a> _m_pick_file(<span class="keywordtype">bool</span> is_open)<span class="keyword"> const</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <a class="code" href="../../d0/d73/classnana_1_1filebox.html">filebox</a> fbox(*<span class="keyword">this</span>, is_open);</div>
<div class="line">        fbox.add_filter(<span class="stringliteral">&quot;Text&quot;</span>, <span class="stringliteral">&quot;*.txt&quot;</span>);</div>
<div class="line">        fbox.add_filter(<span class="stringliteral">&quot;All Files&quot;</span>, <span class="stringliteral">&quot;*.*&quot;</span>);</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">return</span> (fbox.show() ? fbox.file() : <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">bool</span> _m_ask_save()</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (textbox_.edited())</div>
<div class="line">        {</div>
<div class="line">            <span class="keyword">auto</span> fs = textbox_.filename();</div>
<div class="line">            <a class="code" href="../../d8/d97/classnana_1_1msgbox.html">msgbox</a> box(*<span class="keyword">this</span>, <span class="stringliteral">&quot;Simple Notepad&quot;</span>, msgbox::button_t::yes_no_cancel);</div>
<div class="line">            box &lt;&lt; <span class="stringliteral">&quot;Do you want to save these changes?&quot;</span>;</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">switch</span> (box.show())</div>
<div class="line">            {</div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="../../d8/d97/classnana_1_1msgbox.html#a4f96465b7fc07ca07e5ebe969c9991f5a1ea950d9ff4f0d6923e788ffecc7c04d">msgbox::pick_yes</a>:</div>
<div class="line">                <span class="keywordflow">if</span> (fs.empty())</div>
<div class="line">                {</div>
<div class="line">                    fs = _m_pick_file(<span class="keyword">false</span>);</div>
<div class="line">                    <span class="keywordflow">if</span> (fs.empty())</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">if</span> (fs.find(<span class="stringliteral">&quot;.txt&quot;</span>) == fs.npos)</div>
<div class="line">                        fs += <span class="stringliteral">&quot;.txt&quot;</span>;</div>
<div class="line">                }</div>
<div class="line">                textbox_.store(fs.data());</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="../../d8/d97/classnana_1_1msgbox.html#a4f96465b7fc07ca07e5ebe969c9991f5a2912f588106a9a1531603d6c5959ffac">msgbox::pick_no</a>:</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="../../d8/d97/classnana_1_1msgbox.html#a4f96465b7fc07ca07e5ebe969c9991f5a9aa947a2472e067bc9430adf2b0e6d2b">msgbox::pick_cancel</a>:</div>
<div class="line">                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">void</span> _m_make_menus()</div>
<div class="line">    {</div>
<div class="line">        menubar_.push_back(<span class="stringliteral">&quot;&amp;FILE&quot;</span>);</div>
<div class="line">        menubar_.at(0).append(<span class="stringliteral">&quot;New&quot;</span>, [<span class="keyword">this</span>](<a class="code" href="../../d5/d55/classnana_1_1drawerbase_1_1menu_1_1menu__item__type_1_1item__proxy.html">menu::item_proxy</a>&amp; ip)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span>(_m_ask_save())</div>
<div class="line">                textbox_.reset();</div>
<div class="line">        });</div>
<div class="line">        menubar_.at(0).append(<span class="stringliteral">&quot;Open&quot;</span>, [<span class="keyword">this</span>](<a class="code" href="../../d5/d55/classnana_1_1drawerbase_1_1menu_1_1menu__item__type_1_1item__proxy.html">menu::item_proxy</a>&amp; ip)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (_m_ask_save())</div>
<div class="line">            {</div>
<div class="line">                <span class="keyword">auto</span> fs = _m_pick_file(<span class="keyword">true</span>);</div>
<div class="line">                <span class="keywordflow">if</span> (fs.size())</div>
<div class="line">                    textbox_.load(fs.data());</div>
<div class="line">            }</div>
<div class="line">        });</div>
<div class="line">        menubar_.at(0).append(<span class="stringliteral">&quot;Save&quot;</span>, [<span class="keyword">this</span>](<a class="code" href="../../d5/d55/classnana_1_1drawerbase_1_1menu_1_1menu__item__type_1_1item__proxy.html">menu::item_proxy</a>&amp;)</div>
<div class="line">        {</div>
<div class="line">            <span class="keyword">auto</span> fs = textbox_.filename();</div>
<div class="line">            <span class="keywordflow">if</span> (fs.empty())</div>
<div class="line">            {</div>
<div class="line">                fs = _m_pick_file(<span class="keyword">false</span>);</div>
<div class="line">                <span class="keywordflow">if</span> (fs.empty())</div>
<div class="line">                    <span class="keywordflow">return</span>;</div>
<div class="line">            }</div>
<div class="line">            textbox_.store(fs.data());</div>
<div class="line">        });</div>
<div class="line"></div>
<div class="line">        menubar_.push_back(<span class="stringliteral">&quot;F&amp;ORMAT&quot;</span>);</div>
<div class="line">        menubar_.at(1).append(<span class="stringliteral">&quot;Line Wrap&quot;</span>, [<span class="keyword">this</span>](<a class="code" href="../../d5/d55/classnana_1_1drawerbase_1_1menu_1_1menu__item__type_1_1item__proxy.html">menu::item_proxy</a>&amp; ip)</div>
<div class="line">        {</div>
<div class="line">            textbox_.line_wrapped(ip.<a class="code" href="../../d5/d55/classnana_1_1drawerbase_1_1menu_1_1menu__item__type_1_1item__proxy.html#a64fcbd7685c9f5c527be5c29d60ca933">checked</a>());</div>
<div class="line">        });</div>
<div class="line">        menubar_.at(1).check_style(0, <a class="code" href="../../d3/deb/namespacenana_1_1drawerbase_1_1menu.html#a0e25a5836e3197c60487d7b2778d736aa4dd429acbc6ba3433af7f9bf5b4791c9">menu::checks::highlight</a>);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    notepad_form npform;</div>
<div class="line">    npform.show();</div>
<div class="line">    <a class="code" href="../../d2/d76/namespacenana.html#adfeaf4a48fd8f02161268cde0ae797d9">exec</a>();</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
</div><!-- fragment --><p> A few comments:</p>
<p><div class="fragment"><div class="line"><span class="keyword">class </span>notepad_form     : <span class="keyword">public</span> form</div>
</div><!-- fragment --> We need among others to create the <code>menubar</code> and <code>textbox</code>, and set the layout for the form.</p>
<p><div class="fragment"><div class="line">        textbox_.borderless(<span class="keyword">true</span>);</div>
<div class="line">        API::effects_edge_nimbus(textbox_, effects::edge_nimbus::none);</div>
</div><!-- fragment --> Disables the border and edge numbus effect of the textbox.</p>
<p><div class="fragment"><div class="line">        textbox_.events().mouse_dropfiles([<span class="keyword">this</span>](<span class="keyword">const</span> arg_dropfiles&amp; arg)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (arg.files.size() &amp;&amp; _m_ask_save())</div>
<div class="line">                textbox_.load(arg.files.at(0).data());</div>
<div class="line">        });</div>
</div><!-- fragment --> Sets a Drag'n Drop event for the textbox, it allows user to open a file by dragging the file outside of the program and dropping the file inside the program. The call of _m_ask_save() here is to try to ask user to save the edited text.</p>
<p><div class="fragment"><div class="line">        <a class="code" href="../../d5/d1e/namespacenana_1_1_a_p_i.html#a0a5fa378a313bd333b3ab8ae86d69bcc">events</a>().unload([<span class="keyword">this</span>](<span class="keyword">const</span> arg_unload&amp; arg){</div>
<div class="line">            <span class="keywordflow">if</span> (!_m_ask_save())</div>
<div class="line">                arg.cancel = <span class="keyword">true</span>;</div>
<div class="line">        });</div>
</div><!-- fragment --> Sets an unload event for the form, it enables program to ask user to save the edited text when closing the program, and if user cancels the messagebox, the program stops closing.</p>
<p><div class="fragment"><div class="line">    <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a> _m_pick_file(<span class="keywordtype">bool</span> is_open) <span class="keyword">const</span></div>
</div><!-- fragment --> We start with a private member function <code>_m_pick_file()</code>, this function is to tell user to select a file.</p>
<p><div class="fragment"><div class="line">                <span class="keywordflow">return</span> (fbox.show() ? fbox.file() : <span class="stringliteral">&quot;&quot;</span> );</div>
</div><!-- fragment --> If the user clicks the "cancel" button or closes the dialogue by clicking the 'X' close button, <code>fbox.show()</code> returns <code>false</code> for no file selection.</p>
<p><div class="fragment"><div class="line">    <span class="keywordtype">bool</span> _m_ask_save()</div>
</div><!-- fragment --> This function will have asked user to save the text to a file by the time the text is closed.</p>
<p><div class="fragment"><div class="line">        <span class="keywordflow">if</span> (textbox_.edited())</div>
</div><!-- fragment --> Determines whether the text has been edited. If there are modifications to the text, then it ask to save it.</p>
<p><div class="fragment"><div class="line">            <span class="keyword">auto</span> fs = textbox_.filename();</div>
</div><!-- fragment --> When the textbox opens a file or saves a text to a file, the textbox will keep the filename. If <code>fs</code> is empty, the program asks user to select a file to save the text. <code>_m_ask_save()</code> has a return type <code>bool</code>. It returns <code>false</code> if and only if the user cancel the selection.</p>
<p><div class="fragment"><div class="line">    <span class="keywordtype">void</span> _m_make_menus()</div>
</div><!-- fragment --> Sets menus for the menubar.</p>
<p><div class="fragment"><div class="line"><span class="keywordtype">int</span> main()</div>
</div><!-- fragment --> Creates the form of notepad.</p>
<h1><a class="anchor" id="Functor"></a>
Function Objects</h1>
<p>This chapter shows two basic concepts: function objects and lambdas. A Function Object, or Functor (the two terms are synonymous) is simply any object that can be called as if it is a function. It can be an object of a class that defines a member function <code>operator()</code>.</p>
<p>The function object is an impressive technology. A function object is a more general concept than a function because a function object can have state that persist across several calls and can be initialized and examined from outside the object, unlike a static local variable. For example:</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>sum </div>
<div class="line">{ <span class="keyword">public</span>: </div>
<div class="line">        sum() : i_(0) {} </div>
<div class="line">        <span class="keyword">operator</span> int()<span class="keyword"> const volatile </span>{ <span class="keywordflow">return</span> i_; } </div>
<div class="line">                                   <span class="comment">//this makes the objects of this class can be used like a function. </span></div>
<div class="line">        <span class="keywordtype">void</span> operator()(<span class="keywordtype">int</span> x)<span class="keyword"> volatile </span>{ i_ += x; } </div>
<div class="line">  <span class="keyword">private</span>: </div>
<div class="line">        <span class="keywordtype">int</span> i_; </div>
<div class="line">}; </div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> foo(<span class="keyword">const</span> <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/container/vector.html">std::vector&lt;int&gt;</a>&amp; v) </div>
<div class="line">{                       <span class="comment">//gather the sum of all elements. </span></div>
<div class="line">   <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/io/basic_ostream.html">std::cout</a>&lt;&lt;<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/algorithm/for_each.html">std::for_each</a>(v.<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/container/vector/begin.html">begin</a>(), v.<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/container/vector/end.html">end</a>(), sum())&lt;&lt;<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/io/manip/endl.html">std::endl</a>; </div>
<div class="line">} </div>
</div><!-- fragment --><p><code><a class="elRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/algorithm/for_each.html">std::for_each()</a></code> returns a copy of the object <code>sum</code>, and we are able to retrieve the state or result. On the basis of the feature that function objects retain its own state, it is easy used for concurrency process, and it is extensively used for providing flexibility in the library implementation.</p>
<p>Nana C++ Library uses a large number of function objects to make the framework work. To make the framework flexible enough, Nana C++ Library uses the general <a class="elRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/utility/functional/function.html">std::function</a> class template.</p>
<p>There are four different types of event handlers that can be processed. It is flexible and reduce the complexity of study and use.</p>
<p>In the previous example, we illustrated the use of <a class="elRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/utility/functional/function.html">std::function</a> and the flexibility of using a function object. Practically, creating a functor object is not required. Using these functions this way instead of creating a functor: ?????</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main() </div>
<div class="line">{ </div>
<div class="line">        <span class="keyword">using namespace </span>nana; </div>
<div class="line">        form fm; </div>
<div class="line">        click_stat cs; </div>
<div class="line">        fm.<a class="code" href="../../d3/d95/classnana_1_1widget__object.html#acc81585b443ae00b6d3ac08945638b94">events</a>().<a class="code" href="../../dd/d19/structnana_1_1general__events.html#a0d38e277cb45ddeb6c492d8ce9705cfc">click</a>(foo); </div>
<div class="line">        fm.events().click(cs, &amp;click_stat::respond); </div>
<div class="line">        fm.events().click(foo_with_eventinfo); </div>
<div class="line">        fm.events().click(cs, &amp;click_stat::respond_ei); </div>
<div class="line">        fm.show(); </div>
<div class="line">        <a class="code" href="../../d2/d76/namespacenana.html#adfeaf4a48fd8f02161268cde0ae797d9">exec</a>(); </div>
<div class="line">} </div>
</div><!-- fragment --> <div class="image">
<img src="../../make_event.jpg" alt="make_event.jpg"/>
<div class="caption">
Figure 2.1 Various methods to make events to respond click.</div></div>
<p> Or more elaborated: </p>
<div class="fragment"><div class="line"><span class="preprocessor">    #include &lt;nana/gui/wvl.hpp&gt;</span> </div>
<div class="line"><span class="preprocessor">    #include &lt;iostream&gt;</span> </div>
<div class="line">    <span class="keywordtype">void</span> foo() </div>
<div class="line">    { </div>
<div class="line">        <span class="comment">//std::system(&quot;cls&quot;); </span></div>
<div class="line">        <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/io/basic_ostream.html">std::cout</a>&lt;&lt;<span class="stringliteral">&quot;foo&quot;</span>&lt;&lt;<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/io/manip/endl.html">std::endl</a>; </div>
<div class="line">    } </div>
<div class="line">    <span class="keywordtype">int</span> bar() </div>
<div class="line">    { </div>
<div class="line">        <span class="comment">//std::system(&quot;cls&quot;); </span></div>
<div class="line">        <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/io/basic_ostream.html">std::cout</a>&lt;&lt;<span class="stringliteral">&quot;bar&quot;</span>&lt;&lt;<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/io/manip/endl.html">std::endl</a>; </div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    } </div>
<div class="line">    <span class="keywordtype">void</span> foo_with_eventinfo(<span class="keyword">const</span> <a class="code" href="../../d6/d7c/structnana_1_1arg__mouse.html">nana::arg_mouse</a>&amp; ei) </div>
<div class="line">    { </div>
<div class="line">      <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/io/basic_ostream.html">std::cout</a> &lt;&lt; <span class="stringliteral">&quot;foo_with_eventinfo, mouse pos = (&quot;</span></div>
<div class="line">       &lt;&lt; ei.<a class="code" href="../../d6/d7c/structnana_1_1arg__mouse.html#a9bc3e4160ed6638ab0286a15f0623b60">pos</a>.<a class="code" href="../../d0/d24/structnana_1_1point.html#af41b47be4303c8713b92abfb9a7863d0">x</a>  &lt;&lt; <span class="stringliteral">&quot;, &quot;</span>  &lt;&lt;  ei.<a class="code" href="../../d6/d7c/structnana_1_1arg__mouse.html#a9bc3e4160ed6638ab0286a15f0623b60">pos</a>.<a class="code" href="../../d0/d24/structnana_1_1point.html#aeb5848c69ddfe797209eb559898ae6a5">y</a>  &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/io/manip/endl.html">std::endl</a>; </div>
<div class="line">    } </div>
<div class="line">    <span class="keyword">class </span>click_stat </div>
<div class="line">    { <span class="keyword">public</span>: </div>
<div class="line">        click_stat(): n_(0), id(++glob_id) { } </div>
<div class="line">        click_stat(<span class="keyword">const</span> click_stat&amp;o):n_(o.n_), id(++glob_id) {} ; </div>
<div class="line"></div>
<div class="line">        <span class="keywordtype">void</span> respond   ()   { <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/io/basic_ostream.html">std::cout</a>&lt;&lt;<span class="stringliteral">&quot;click_stat     &quot;</span>&lt;&lt;<span class="keywordtype">id</span>&lt;&lt; <span class="stringliteral">&quot; = &quot;</span>&lt;&lt;++n_&lt;&lt;<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/io/manip/endl.html">std::endl</a>; } </div>
<div class="line">        <span class="keywordtype">int</span>  respond_I ()   { <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/io/basic_ostream.html">std::cout</a>&lt;&lt;<span class="stringliteral">&quot;click_stat int &quot;</span>&lt;&lt;<span class="keywordtype">id</span>&lt;&lt; <span class="stringliteral">&quot; = &quot;</span>&lt;&lt;++n_&lt;&lt;<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/io/manip/endl.html">std::endl</a>; <span class="keywordflow">return</span> 1;} </div>
<div class="line">        <span class="keywordtype">void</span> respond_ei(<span class="keyword">const</span> <a class="code" href="../../d6/d7c/structnana_1_1arg__mouse.html">nana::arg_mouse</a>&amp; ei) </div>
<div class="line">        { </div>
<div class="line">             <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/io/basic_ostream.html">std::cout</a> &lt;&lt; <span class="stringliteral">&quot;click_state &quot;</span>&lt;&lt;<span class="keywordtype">id</span>&lt;&lt; <span class="stringliteral">&quot; width eventinfo = &quot;</span> &lt;&lt; ++n_ </div>
<div class="line">            &lt;&lt; <span class="stringliteral">&quot;, mouse pos = (&quot;</span>  &lt;&lt;ei.<a class="code" href="../../d6/d7c/structnana_1_1arg__mouse.html#a9bc3e4160ed6638ab0286a15f0623b60">pos</a>.<a class="code" href="../../d0/d24/structnana_1_1point.html#af41b47be4303c8713b92abfb9a7863d0">x</a>&lt;&lt;<span class="stringliteral">&quot;, &quot;</span>&lt;&lt;ei.<a class="code" href="../../d6/d7c/structnana_1_1arg__mouse.html#a9bc3e4160ed6638ab0286a15f0623b60">pos</a>.<a class="code" href="../../d0/d24/structnana_1_1point.html#aeb5848c69ddfe797209eb559898ae6a5">y</a>&lt;&lt;<span class="stringliteral">&quot;)&quot;</span></div>
<div class="line">            &lt;&lt; <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/io/manip/endl.html">std::endl</a>; </div>
<div class="line">        } </div>
<div class="line">     <span class="keyword">private</span>: </div>
<div class="line">        <span class="comment">//click_stat(const click_stat&amp;) ; </span></div>
<div class="line">       <span class="keywordtype">int</span> n_;</div>
<div class="line">       <span class="keyword">const</span> <span class="keywordtype">int</span> id; </div>
<div class="line">       <span class="keyword">static</span> <span class="keywordtype">int</span> glob_id ;</div>
<div class="line">    }; </div>
<div class="line">    <span class="keywordtype">int</span> click_stat::glob_id{0};</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">int</span> main() </div>
<div class="line">    { </div>
<div class="line">        <span class="keyword">using namespace </span>nana; </div>
<div class="line">        <span class="keyword">using</span> fun_t            = <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/utility/functional/function.html">std::function&lt;void(      void      )&gt;</a>  ; </div>
<div class="line">        <span class="keyword">using</span> fun_with_param_t = <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/utility/functional/function.html">std::function&lt;void(const arg_mouse&amp;)&gt;</a>  ; </div>
<div class="line"></div>
<div class="line">        form        fm; </div>
<div class="line">        click_stat  cs; </div>
<div class="line">    </div>
<div class="line">        fm.<a class="code" href="../../d3/d95/classnana_1_1widget__object.html#acc81585b443ae00b6d3ac08945638b94">events</a>().<a class="code" href="../../dd/d19/structnana_1_1general__events.html#a0d38e277cb45ddeb6c492d8ce9705cfc">click</a>(foo); </div>
<div class="line">        fun_t       f=foo; </div>
<div class="line">        fm.events().click(f); </div>
<div class="line">        fm.events().click(bar); </div>
<div class="line"></div>
<div class="line">        fm.events().mouse_down (foo_with_eventinfo); </div>
<div class="line">        fun_with_param_t fp(foo_with_eventinfo); </div>
<div class="line">        fm.events().mouse_down(fp);</div>
<div class="line"></div>
<div class="line">        fm.events().click( [&amp;cs](){cs.respond();}                  ); </div>
<div class="line">        f= <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/utility/functional/bind.html">std::bind</a>( &amp;click_stat::respond, cs); </div>
<div class="line">        fm.events().click(  f                                      ); </div>
<div class="line">        fm.events().click( <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/utility/functional/bind.html">std::bind</a>( &amp;click_stat::respond  , &amp;cs) ); </div>
<div class="line">        fm.events().click( [&amp; ](){cs.respond();}                   ); </div>
<div class="line">        <span class="comment">//fm.events().click( std::bind( &amp;click_stat::respond_I, &amp;cs) ); </span></div>
<div class="line">        fm.events().click( [&amp; ](){cs.respond_I();}                   ); </div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        fp= <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/utility/functional/bind.html">std::bind</a>( &amp;click_stat::respond_ei, &amp;cs , std::placeholders::_1 ); </div>
<div class="line">        fm.events().mouse_down(   fp                                                            );</div>
<div class="line">        fm.events().mouse_down( [&amp;](<span class="keyword">const</span> <a class="code" href="../../d6/d7c/structnana_1_1arg__mouse.html">arg_mouse</a>&amp;ma){cs.respond_ei(ma);}                     );</div>
<div class="line">        fm.events().mouse_down( <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/utility/functional/bind.html">std::bind</a>( &amp;click_stat::respond_ei, cs, std::placeholders::_1)  );</div>
<div class="line"></div>
<div class="line">        fm.show(); </div>
<div class="line">        <a class="code" href="../../d2/d76/namespacenana.html#adfeaf4a48fd8f02161268cde0ae797d9">exec</a>(); </div>
<div class="line">    } </div>
</div><!-- fragment --> <div class="image">
<img src="https://raw.githubusercontent.com/qPCR4vir/nana-demo/master/Examples/events.png" />
</div>
<h2><a class="anchor" id="Predefined"></a>
Predefined Function Objects (is this in use?)</h2>
<p>Nana C++ Library includes many different predefined function objects. Using these function objects together with function templates increases the expressive power of the library as well as making the resulting code much more efficient. For example, if a C++ program wants to close the form when the form is being clicked.</p>
<div class="fragment"><div class="line">form.<a class="code" href="../../d3/d95/classnana_1_1widget__object.html#acc81585b443ae00b6d3ac08945638b94">events</a>().<a class="code" href="../../dd/d19/structnana_1_1general__events.html#a0d38e277cb45ddeb6c492d8ce9705cfc">click</a>(<a class="code" href="../../d2/d76/namespacenana.html#aec14d9a922f2b2a5c52680e6f4c9c2d3afb14982288108e1fbd6207ef55f05027">destroy</a>(form)); </div>
</div><!-- fragment --><p>Please include &lt;nana/gui/functional.hpp&gt; before using these function objects.</p>
<div class="fragment"><div class="line"><span class="keyword">class </span><a class="code" href="../../d2/d76/namespacenana.html#aec14d9a922f2b2a5c52680e6f4c9c2d3afb14982288108e1fbd6207ef55f05027">destroy</a> </div>
<div class="line">{ <span class="keyword">public</span>: </div>
<div class="line">        <a class="code" href="../../d2/d76/namespacenana.html#aec14d9a922f2b2a5c52680e6f4c9c2d3afb14982288108e1fbd6207ef55f05027">destroy</a>(<a class="code" href="../../d2/d87/structnana_1_1detail_1_1window__handle__impl.html">nana::window</a> wd); </div>
<div class="line">        <span class="keywordtype">void</span> operator()() <span class="keyword">const</span>; </div>
<div class="line">}; </div>
</div><!-- fragment --><p>Destroy the window.</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>hide </div>
<div class="line">{ <span class="keyword">public</span>: </div>
<div class="line">        hide(<a class="code" href="../../d2/d87/structnana_1_1detail_1_1window__handle__impl.html">nana::window</a> wd); </div>
<div class="line">        <span class="keywordtype">void</span> operator()() <span class="keyword">const</span>; </div>
<div class="line">}; </div>
</div><!-- fragment --><p>Hide the window.</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>show </div>
<div class="line">{ <span class="keyword">public</span>: </div>
<div class="line">        show(<a class="code" href="../../d2/d87/structnana_1_1detail_1_1window__handle__impl.html">nana::window</a> wd); </div>
<div class="line">        <span class="keywordtype">void</span> operator()() <span class="keyword">const</span>; </div>
<div class="line">}; </div>
</div><!-- fragment --><p>Show the window.</p>
<h2><a class="anchor" id="Lambda"></a>
The Lambda Expression</h2>
<p>A lambda expression is a mechanism for specifying a function object. The lambda is a new feature that introduced into C++ language recently, the primary use for a lambda is to specify a simple action to be performed by some functions. For example:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;nana/gui/wvl.hpp&gt;</span> </div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span> </div>
<div class="line"><span class="keywordtype">int</span> main() </div>
<div class="line">{ </div>
<div class="line">        <a class="code" href="../../d6/d57/classnana_1_1form.html">nana::form</a> form; </div>
<div class="line">        form.<a class="code" href="../../d3/d95/classnana_1_1widget__object.html#acc81585b443ae00b6d3ac08945638b94">events</a>().<a class="code" href="../../dd/d19/structnana_1_1general__events.html#a0d38e277cb45ddeb6c492d8ce9705cfc">click</a>( </div>
<div class="line">                []{ <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/io/basic_ostream.html">std::cout</a>&lt;&lt;<span class="stringliteral">&quot;form is clicked&quot;</span>&lt;&lt;<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/io/manip/endl.html">std::endl</a>; } </div>
<div class="line">                ); </div>
<div class="line">        form.<a class="code" href="../../d9/dd8/classnana_1_1widget.html#aa6bc5708ecaff3ede2945d19797394d5">show</a>(); </div>
<div class="line">        <a class="code" href="../../d2/d76/namespacenana.html#adfeaf4a48fd8f02161268cde0ae797d9">nana::exec</a>(); </div>
<div class="line">} </div>
</div><!-- fragment --><p>The argument []{ <a class="elRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/io/basic_ostream.html">std::cout</a>&lt;&lt;"form is clicked"&lt;&lt;<a class="elRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/io/manip/endl.html">std::endl</a>; } is a "lambda" (or "lambda function" or "lambda expression") in C++11 language. A lambda starts with plain [], and compound-state block {} defines a function body. In fact, A lambda defines an anonymous function object, and therefore a lambda could be invoked through a function-call syntax.</p>
<div class="fragment"><div class="line">[]{ <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/io/basic_ostream.html">std::cout</a>&lt;&lt;<span class="stringliteral">&quot;hello, Nana&quot;</span>&lt;&lt;<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/io/manip/endl.html">std::endl</a>; }(); </div>
</div><!-- fragment --><p>The use of lambda is creating an anonymous function object and so the arguments should be specified. For example:</p>
<div class="fragment"><div class="line">form.<a class="code" href="../../d3/d95/classnana_1_1widget__object.html#acc81585b443ae00b6d3ac08945638b94">events</a>().<a class="code" href="../../dd/d19/structnana_1_1general__events.html#a0d38e277cb45ddeb6c492d8ce9705cfc">click</a>( </div>
<div class="line">                [](<span class="keyword">const</span> <a class="code" href="../../d6/d7c/structnana_1_1arg__mouse.html">nana::arg_mouse</a>&amp; ei) </div>
<div class="line">                { <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/io/basic_ostream.html">std::cout</a>&lt;&lt;<span class="stringliteral">&quot;mouse pos=(&quot;</span>&lt;&lt;ei.<a class="code" href="../../d6/d7c/structnana_1_1arg__mouse.html#a9bc3e4160ed6638ab0286a15f0623b60">pos</a>.<a class="code" href="../../d0/d24/structnana_1_1point.html#af41b47be4303c8713b92abfb9a7863d0">x</a>&lt;&lt;<span class="stringliteral">&quot;, &quot;</span>&lt;&lt;ei.<a class="code" href="../../d6/d7c/structnana_1_1arg__mouse.html#a9bc3e4160ed6638ab0286a15f0623b60">pos</a>.<a class="code" href="../../d0/d24/structnana_1_1point.html#aeb5848c69ddfe797209eb559898ae6a5">y</a> &lt;&lt;<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/io/manip/endl.html">std::endl</a>;} </div>
<div class="line">        ); </div>
</div><!-- fragment --><p>The lambda-declarator () is used like a parameter-list. Let's stop the introduction to the lambda, if you want more details of lambda, please refer to other C++ books.</p>
<h1><a class="anchor" id="forms"></a>
Creating forms</h1>
<p>This chapter will teach you how to create a window using Nana C++ Library. A window is a visual element in the operation system or window environment. Form is a window that like a container can contain other widgets, such as button, textbox and listbox. Every GUI program created with the Nana C++ Library need to create one form at least, as in examples of chapter 1. Many forms are created by creating an instance of form. This way of creating a form is easy, but it will make your program complicated if you want to create a bit larger program.</p>
<h2><a class="anchor" id="der"></a>
Defining a form through Derivation</h2>
<p>Nana C++ Library is implemented using Object-oriented methods. We can define an own form by deriving from <a class="el" href="../../d6/d57/classnana_1_1form.html" title="Pop-up window. Is different from other window widgets: its default constructor create the window...">nana::form</a>.</p>
<p>Our first example is a Monty Hall Problem. This is a game that tests you whether change your choice after you picked a door to win a new Car.</p>
<div class="image">
<img src="../../MontyHall.jpg" alt="MontyHall.jpg"/>
<div class="caption">
Figure. The Monty Hall Problem.</div></div>
<p>Let's start creating this application. First we are going to design architecture for the application. As we saw in figure 3.1, the application needs a form, a label and three buttons.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#include &lt;nana/gui/wvl.hpp&gt;</span> </div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#include &lt;nana/gui/widgets/label.hpp&gt;</span> </div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &lt;nana/gui/widgets/button.hpp&gt;</span> </div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &lt;nana/system/platform.hpp&gt;</span> </div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="keyword">class </span>monty_hall </div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;      : <span class="keyword">public</span> <a class="code" href="../../d6/d57/classnana_1_1form.html">nana::form</a> </div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;{ </div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;    <span class="keyword">enum</span> state_t{state_begin, state_picked, state_over}; </div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;  <span class="keyword">public</span>: </div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;    monty_hall(); </div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;  <span class="keyword">private</span>: </div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;    <span class="keywordtype">void</span> _m_pick_door  (<span class="keyword">const</span> <a class="code" href="../../d6/dc2/structnana_1_1arg__click.html">nana::arg_click</a>&amp; ei); </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;    <span class="keywordtype">void</span> _m_play       (<span class="keywordtype">int</span> door); </div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    <span class="keywordtype">void</span> _m_remove_door(<span class="keywordtype">int</span> exclude); </div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;  <span class="keyword">private</span>: </div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;      state_t    state_{state_begin}; </div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    <span class="keywordtype">int</span>        door_has_car_; </div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    <a class="code" href="../../dd/d8c/classnana_1_1label.html">nana::label</a>  label_; </div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    <a class="code" href="../../d7/dc0/classnana_1_1button.html">nana::button</a> door_[3]; </div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160; }; </div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160; <span class="keywordtype">int</span> main() </div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160; { </div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    monty_hall mh; </div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    mh.show(); </div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    <a class="code" href="../../d2/d76/namespacenana.html#adfeaf4a48fd8f02161268cde0ae797d9">nana::exec</a>(); </div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160; } </div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;monty_hall::monty_hall() </div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;      : nana::form(  nana::API::<a class="code" href="../../d5/d1e/namespacenana_1_1_a_p_i.html#aeda48472927c65f3f790297e5fb2df84">make_center</a>(400, 150) , appear::decorate&lt;appear::taskbar&gt;()   ) </div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160; { </div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  this-&gt;caption( (<span class="stringliteral">&quot;The Monty Hall Problem&quot;</span>)); </div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a> <a class="code" href="../../d0/d60/namespacenana_1_1drawerbase_1_1treebox.html#a264d0232fc4a37766c0f8d30ebab824ba1cb251ec0d568de6a929b520c4aed8d1">text</a> =  <span class="stringliteral">&quot;Hi, I am the host, you are on a Game Show:\n&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;                      <span class="stringliteral">&quot;You are given the choice of one of tree Doors.\n&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;                      <span class="stringliteral">&quot;One door has a new Car behind it and the other two: Goats.\n&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;                      <span class="stringliteral">&quot;Now pick a door to win the Car.&quot;</span>; </div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  label_.create(*<span class="keyword">this</span>, <a class="code" href="../../dd/d2d/structnana_1_1rectangle.html">nana::rectangle</a>(<a class="code" href="../../da/df8/structnana_1_1size.html">nana::size</a>(400, 100))); </div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  label_.caption(text); </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a> door_name[3] = </div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;                            { (<span class="stringliteral">&quot;Door No.&amp;1&quot;</span>),  (<span class="stringliteral">&quot;Door No.&amp;2&quot;</span>),  (<span class="stringliteral">&quot;Door No.&amp;3&quot;</span>)}; </div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 3; ++i) </div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  { </div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    door_[i].create(*<span class="keyword">this</span>, <a class="code" href="../../dd/d2d/structnana_1_1rectangle.html">nana::rectangle</a>(50 + 110 * i, 110, 100, 24)); </div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    door_[i].caption(door_name[i]); </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    door_[i].events().click([<span class="keyword">this</span>](<span class="keyword">const</span> <a class="code" href="../../d6/dc2/structnana_1_1arg__click.html">nana::arg_click</a>&amp; ei){ _m_pick_door(ei); });</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  } </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;}</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160; <span class="keywordtype">void</span> monty_hall::_m_pick_door(<span class="keyword">const</span> <a class="code" href="../../d6/dc2/structnana_1_1arg__click.html">nana::arg_click</a>&amp; ei)</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;{ </div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;     <span class="keywordtype">int</span> index = 0; </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;     <span class="keywordflow">for</span>(; index &lt; 3; ++index) </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;     { </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;         <span class="keywordflow">if</span>(door_[index] == ei.<a class="code" href="../../d6/dc2/structnana_1_1arg__click.html#a16e239e67f163a6613bac50ba399fb4b">window_handle</a>) </div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;            <span class="keywordflow">break</span>; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;     } </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;     _m_play(index);        }</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="keywordtype">void</span> monty_hall::_m_play(<span class="keywordtype">int</span> door) </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;{ </div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;   <span class="keywordflow">switch</span>(state_) </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;   { </div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;      <span class="keywordflow">case</span> state_begin: </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                     door_has_car_ = (<a class="code" href="../../d4/dfd/namespacenana_1_1system.html#a15cff5419658230658db5607ca4388cc">nana::system::timestamp</a>() / 1000) % 3; </div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;                     _m_remove_door(door); </div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                     state_ = state_picked; </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                <span class="keywordflow">break</span>; </div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;      <span class="keywordflow">case</span> state_picked: </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                     label_.caption(door_has_car_ == door ? </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                                        (<span class="stringliteral">&quot;Yes, you win the new Car!!&quot;</span>) :  (<span class="stringliteral">&quot;Sign, you are lost!&quot;</span>)); </div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;                     state_ = state_over; </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                <span class="keywordflow">break</span>;           }    }</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="keywordtype">void</span> monty_hall::_m_remove_door(<span class="keywordtype">int</span> exclude) </div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;{ </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;     <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/container/vector.html">std::vector&lt;int&gt;</a> doors; </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 3; ++i) </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;     { </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;         <span class="keywordflow">if</span>(i != exclude) </div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;             doors.<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/container/vector/push_back.html">push_back</a>(i);        } </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;     <span class="keywordtype">unsigned</span> ts = (<a class="code" href="../../d4/dfd/namespacenana_1_1system.html#a15cff5419658230658db5607ca4388cc">nana::system::timestamp</a>() / 1000) % 2; </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;     <span class="keywordflow">if</span>(door_has_car_ == doors[ts]) </div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;         ts = (ts ? 0: 1); </div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;     door_[doors[ts]].enabled(<span class="keyword">false</span>); </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;     doors.<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/container/vector/erase.html">erase</a>(doors.<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/container/vector/begin.html">begin</a>() + ts); </div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;     <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a> text =  <span class="stringliteral">&quot;I know what&#39;s behind all the doors and&quot;</span> </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                         <span class="stringliteral">&quot;I remove a door which a goat behind it. \n&quot;</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                         <span class="stringliteral">&quot;And now, do you want to stick with your decision&quot;</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                         <span class="stringliteral">&quot; of Door No.X or do you want to change your choice&quot;</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                         <span class="stringliteral">&quot; to Door No.Y?&quot;</span>; </div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;     <span class="keywordtype">char</span> door_char = <span class="charliteral">&#39;1&#39;</span> + exclude; </div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;     std::string::size_type pos = text.<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/find.html">find</a>( (<span class="stringliteral">&quot;Door No.X&quot;</span>)); </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;     text.<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/replace.html">replace</a>(pos + 8, 1, 1, door_char); </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;     door_char = <span class="charliteral">&#39;1&#39;</span> + doors[0]; </div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;     pos = text.<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/find.html">find</a>( (<span class="stringliteral">&quot;Door No.Y&quot;</span>)); </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;     text.<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/replace.html">replace</a>(pos + 8, 1, 1, door_char); </div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;     label_.caption(text); </div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;} </div>
<div class="ttc" id="classnana_1_1label_html"><div class="ttname"><a href="../../dd/d8c/classnana_1_1label.html">nana::label</a></div><div class="ttdoc">Define a label widget (can dispaly a formated text string and images). Provides the interfaces to be ...</div><div class="ttdef"><b>Definition:</b> label.hpp:51</div></div>
<div class="ttc" id="structnana_1_1arg__click_html"><div class="ttname"><a href="../../d6/dc2/structnana_1_1arg__click.html">nana::arg_click</a></div><div class="ttdoc">a higher level event argument than just mouse down </div><div class="ttdef"><b>Definition:</b> general_events.hpp:536</div></div>
<div class="ttc" id="classnana_1_1form_html"><div class="ttname"><a href="../../d6/d57/classnana_1_1form.html">nana::form</a></div><div class="ttdoc">Pop-up window. Is different from other window widgets: its default constructor create the window...</div><div class="ttdef"><b>Definition:</b> form.hpp:37</div></div>
<div class="ttc" id="basic_string_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a></div></div>
<div class="ttc" id="namespacenana_1_1drawerbase_1_1treebox_html_a264d0232fc4a37766c0f8d30ebab824ba1cb251ec0d568de6a929b520c4aed8d1"><div class="ttname"><a href="../../d0/d60/namespacenana_1_1drawerbase_1_1treebox.html#a264d0232fc4a37766c0f8d30ebab824ba1cb251ec0d568de6a929b520c4aed8d1">nana::drawerbase::treebox::component::text</a></div></div>
<div class="ttc" id="push_back_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/container/vector/push_back.html">std::vector::push_back</a></div><div class="ttdeci">T push_back(T...args)</div></div>
<div class="ttc" id="replace_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/string/basic_string/replace.html">std::string::replace</a></div><div class="ttdeci">T replace(T...args)</div></div>
<div class="ttc" id="erase_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/container/vector/erase.html">std::vector::erase</a></div><div class="ttdeci">T erase(T...args)</div></div>
<div class="ttc" id="namespacenana_1_1system_html_a15cff5419658230658db5607ca4388cc"><div class="ttname"><a href="../../d4/dfd/namespacenana_1_1system.html#a15cff5419658230658db5607ca4388cc">nana::system::timestamp</a></div><div class="ttdeci">unsigned long timestamp()</div><div class="ttdef"><b>Definition:</b> platform.cpp:66</div></div>
<div class="ttc" id="classnana_1_1button_html"><div class="ttname"><a href="../../d7/dc0/classnana_1_1button.html">nana::button</a></div><div class="ttdoc">Define a button widget and provides the interfaces to be operational. </div><div class="ttdef"><b>Definition:</b> button.hpp:77</div></div>
<div class="ttc" id="find_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/string/basic_string/find.html">std::string::find</a></div><div class="ttdeci">T find(T...args)</div></div>
<div class="ttc" id="vector_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/container/vector.html">std::vector</a></div></div>
<div class="ttc" id="begin_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/container/vector/begin.html">std::vector::begin</a></div><div class="ttdeci">T begin(T...args)</div></div>
<div class="ttc" id="structnana_1_1rectangle_html"><div class="ttname"><a href="../../dd/d2d/structnana_1_1rectangle.html">nana::rectangle</a></div><div class="ttdef"><b>Definition:</b> basic_types.hpp:408</div></div>
<div class="ttc" id="structnana_1_1arg__click_html_a16e239e67f163a6613bac50ba399fb4b"><div class="ttname"><a href="../../d6/dc2/structnana_1_1arg__click.html#a16e239e67f163a6613bac50ba399fb4b">nana::arg_click::window_handle</a></div><div class="ttdeci">::nana::window window_handle</div><div class="ttdoc">A handle to the event window. </div><div class="ttdef"><b>Definition:</b> general_events.hpp:538</div></div>
<div class="ttc" id="namespacenana_1_1_a_p_i_html_aeda48472927c65f3f790297e5fb2df84"><div class="ttname"><a href="../../d5/d1e/namespacenana_1_1_a_p_i.html#aeda48472927c65f3f790297e5fb2df84">nana::API::make_center</a></div><div class="ttdeci">rectangle make_center(unsigned width, unsigned height)</div><div class="ttdoc">Retrieves a rectangle which is in the center of the screen. </div><div class="ttdef"><b>Definition:</b> programming_interface.cpp:415</div></div>
<div class="ttc" id="namespacenana_html_adfeaf4a48fd8f02161268cde0ae797d9"><div class="ttname"><a href="../../d2/d76/namespacenana.html#adfeaf4a48fd8f02161268cde0ae797d9">nana::exec</a></div><div class="ttdeci">void exec()</div><div class="ttdef"><b>Definition:</b> wvl.cpp:26</div></div>
<div class="ttc" id="structnana_1_1size_html"><div class="ttname"><a href="../../da/df8/structnana_1_1size.html">nana::size</a></div><div class="ttdef"><b>Definition:</b> basic_types.hpp:389</div></div>
</div><!-- fragment --><p>  MontiHall.cpp Lines 1 to 4 include the headers that are required by this application. The <code>wvl.hpp</code> provides the basis of Nana C++ Library that all GUI program required. <code>label.hpp</code> and <code>button.hpp</code> include the definitions of label and button, and we will specify the door which has the new Car randomly by using <code>timestamp()</code> - function provided in <code>platform.hpp</code>.</p>
<p>Lines 6 to 21 define the class <code>monty_hall</code> derived from <a class="el" href="../../d6/d57/classnana_1_1form.html" title="Pop-up window. Is different from other window widgets: its default constructor create the window...">nana::form</a>. In other words, class <code>monty_hall</code> is defined as a <code>form</code> and we will put all handlers in this class scope to keep the program clear.</p>
<p>Line 9 defines a state type that contains three states. <code>state_begin</code> is a state that indicates the first pick, <code>state_picked</code> indicates the second pick, and <code>state_over</code> indicates the result.</p>
<p>Line 11 declares a default constructor. It will initialize the widgets and set the initial state.</p>
<p>Line 13 declares a private member function to respond the user action on buttons.</p>
<p>Line 14 and 15 declare two private member functions which handle the game logic. We will define them later.</p>
<p>Lines 17 to 20 define the data members including label and buttons. The integer member door_has_car_ indicates the number of the door which has a car behind it.</p>
<p>Lines 23 to 28 define the main function; an object of class monty_hall is defined, sets the form visible and enters the event loop.</p>
<p>Let see the default constructor and three private member functions.</p>
<p>Line 30 and 31 initialize the base class of monty_hall. make_center() is a function that returns a rectangle that specifies an area in the center of screen with size of 400 X 150. The typedef name appear is used for the abstraction of form appearance. The appear::decorate defines the form with caption bar, border, a close button and displaying in taskbar.</p>
<p>Line 17 initializes the state.</p>
<p>Line 33 sets the caption of form.</p>
<p>Lines 34 to 37 define a text that describes the game information.</p>
<p>Line 39 and 40 create a label widget and set the caption of label. The label will display the text which is defined in line 34.</p>
<p>Line 41 and 42 define a string array which contains the names of three doors.</p>
<p>Lines 43 to 48 create the buttons in a loop, and set the caption, make a click event for three buttons.</p>
<p>On line 51, the member function has a parameter, eventinfo that contains the event information, such as which widget the event is taking place. We need the information to determinate which button is clicked, because the event handler of the three buttons is one and the same.</p>
<p>Lines 53 to 59 find the index of the button which is clicked. The button which is click is specified by ei.window. _m_play() handles the logic of game.</p>
<p>Line 60 defines the _m_play() to handle the logic of this game, it contains a parameter to indicate what the number of door is picked. There are two states we would handle, state_begin indicates the first pick, and now, program should put the car behind a door randomly, use the timestamp() function to retrieve the number of milliseconds that have elapsed since system was started, we use the number to implement randomization, and find the remainder of division of the number by 3 through the modulus operation, the last result is the door number which is large or equal to 0 and less than 3. _m_remove_door() is used for removing a door excluding the car behind it and the door that is picked.</p>
<p>Line 67 is setting the next state.</p>
<p>Line 69 is start of handling the state that gamer plays the second pick.</p>
<p>Line 70 and 71 test the number of door whether is the door which the car behind it, and set the caption of label by result.</p>
<p>Line 72 sets the final state.</p>
<p>In fact, in the lines from 51 to 59, the member function _m_pick_door() can be removed by using <a class="elRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/utility/functional/bind.html">std::bind()</a>, refer to section 2.3 Think about the Design. By using <a class="elRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/utility/functional/bind.html">std::bind()</a>, we can bind the the index of door to the _m_play() and make it as the event handler for the click of button.</p>
<p>Line 74 defines the _m_remove_door() to removes a door which is a goat behind it and is not picked by gamer. The parameter exclude is a door number that picked by gamer.</p>
<p>Lines 76 to 80 create a <a class="elRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/container/vector.html">std::vector</a> object that contains the index of doors excluding the one of gamer picked. So the result of vector only contains two doors.</p>
<p>Lines 81 to 85 choose a door in the vector randomly, if the door has a car behind it, change the choice to other one, the door which is chosen will be removed. A widget has two methods named enabled(), they are overloading functions void enabled(bool) and bool enabled() const, are used for setting or retrieving the state whether the widget can receive inputs from mouse and keyboard. If the enabled state of a button is set to false, the color of button text becomes gray and the button is not working while clicking on it.</p>
<p>Lines 86 to 97 prepare the text that asks gamer whether changes his choice after the first pick.</p>
<p>Now run the program. Verify that the shortcut keys Alt+1, Alt+2 and Alt+3 trigger the correct behavior. Press Tab key to navigate through the buttons with keyboard, the default tabstop order is the order in which the buttons were created.</p>
<h2><a class="anchor" id="loader"></a>
Creating An Instance of the Form with form_loader&lt;form&gt;()</h2>
<p>In the previous chapters we provided examples of defining the form objects. They are usually local objects. When the local object goes out of scope, its destructor is called automatically. Sometimes we need to keep the object alive when it goes out of the scope: another way to create an object is to declare a pointer variable to the class of object and call the C++ new operator, which will allocate space for the object and call the constructor. In this case, the pointer variable must be explicitly deallocated with the delete operator. But the question is when shall we delete the pointer variable? In fact, we can create a form object by using form_loader. Nana C++ Library will manage the form objects created by form_loader and destroy the objects when the user closes the form. For example:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;nana/gui/wvl.hpp&gt;</span> </div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main() </div>
<div class="line">{ </div>
<div class="line">    <span class="keyword">using namespace </span>nana; </div>
<div class="line">    <a class="code" href="../../d7/dc2/classnana_1_1detail_1_1form__loader.html">form_loader&lt;form&gt;</a>()().show(); </div>
<div class="line">    <a class="code" href="../../d2/d76/namespacenana.html#adfeaf4a48fd8f02161268cde0ae797d9">exec</a>(); </div>
<div class="line">} </div>
</div><!-- fragment --><p> <a class="el" href="../../d2/d76/namespacenana.html#a7962f32a15843e243afa446dcdb2e37f">nana::form_loader</a> is a template functor class. It creates an object of the template parameter class. <a class="el" href="../../d2/d76/namespacenana.html#a7962f32a15843e243afa446dcdb2e37f">nana::form_loader</a> is useful when you create a form and don't want to take care about the lifetime of the object. Continuing with the next example, we see a form is created when the button is being clicked.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;nana/gui/wvl.hpp&gt;</span> </div>
<div class="line"><span class="preprocessor">#include &lt;nana/gui/widgets/button.hpp&gt;</span> </div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> <a class="code" href="../../d2/d76/namespacenana.html#aec14d9a922f2b2a5c52680e6f4c9c2d3aa8affc088cbca89fa20dbd98c91362e4">click</a>() </div>
<div class="line">{ </div>
<div class="line">    <span class="keyword">static</span> <span class="keywordtype">int</span> i;</div>
<div class="line"></div>
<div class="line">    <span class="keyword">using namespace </span>nana; </div>
<div class="line">    <span class="keyword">auto</span> &amp;fm=<a class="code" href="../../d7/dc2/classnana_1_1detail_1_1form__loader.html">form_loader&lt;form&gt;</a>()();</div>
<div class="line">    fm.caption(<a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/string/basic_string/to_string.html">std::to_string</a>(++i)+ <span class="stringliteral">&quot;-Nana window&quot;</span>);</div>
<div class="line">    fm.show(); </div>
<div class="line">} </div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main() </div>
<div class="line">{ </div>
<div class="line">    <span class="keyword">using namespace </span>nana; </div>
<div class="line">    form fm{<a class="code" href="../../dd/d2d/structnana_1_1rectangle.html">nana::rectangle</a>(100, 100, 350, 230)}; </div>
<div class="line">    <a class="code" href="../../d7/dc0/classnana_1_1button.html">button</a> btn(fm, <a class="code" href="../../dd/d2d/structnana_1_1rectangle.html">nana::rectangle</a>(10, 10, 150, 23)); </div>
<div class="line">    btn.caption(<span class="stringliteral">&quot;Open a new form&quot;</span>); </div>
<div class="line">    btn.events().click(click); </div>
<div class="line">    fm.show(); </div>
<div class="line">    <a class="code" href="../../d2/d76/namespacenana.html#adfeaf4a48fd8f02161268cde0ae797d9">exec</a>(); </div>
<div class="line">} </div>
</div><!-- fragment --><p> In fact, a form_loader object can be passed to make_event because it is a functor. Take a look at above code: form would not be shown immediately after initialization, and the show() method is need to call explicitly after creating the form by form_loader. Therefore, only an invisible form created by the form_loader object we can get, if we pass the form_loader object like above code to the make_event. A way to achieve it is calling the show() method in that constructor of class, but in most instances, we are not enable to modify the code of the classes, and therefore we need a correct solution. The form_loader has two template parameters, the first is used for specifying a type of form, the second is a non-type template parameter and its type is bool named IsMakeVisible, used for determining whether making the form visible. So, we can specify the second template parameter by giving true, like this.</p>
<div class="fragment"><div class="line">btn.events().click(form_loader&lt;form, true&gt;()); </div>
</div><!-- fragment --><p>See also <a href="https://nanapro.codeplex.com/discussions/443128">this discussion</a>.</p>
<h2><a class="anchor" id="mmodal"></a>
Modal Form</h2>
<p>Modal form is a modality of forms. It would handle all interactions with the user while the form is active. This is what makes the form modal, the user can not interact with its owner window until the form is closed. Modal form is useful to block the program execution and wait for a user input. For example:</p>
<p>\ include modal_form.cpp Call <a class="el" href="../../d5/d1e/namespacenana_1_1_a_p_i.html#ae6e1fbc1c0c422296f0124a05d0486ee" title="Blocks the routine til the specified window is closed. ">nana::API::modal_window()</a> to enable modal form. Only if an owner is specified for the form initialization, will the form enable as modal form. The object fm in function foo() is created and specified ei.window as its owner. The ei.window refers to the form that is defined in function main(), and passed by event argument.</p>
<h1><a class="anchor" id="appear_doc"></a>
Appearance of Window</h1>
<p>A window has an appearance. This appearance can be specified when a window is being created. To determine the appearance of a window there is a structure named <a class="el" href="../../d5/d27/structnana_1_1appearance.html" title="Window appearance structure defined to specify the appearance of a form. ">nana::appearance</a> with a bool member for each feature with can be included or excluded in the "apereance" of the windows form. But in practical development is hard to describe the style of the appearance using the struct <a class="el" href="../../d5/d27/structnana_1_1appearance.html" title="Window appearance structure defined to specify the appearance of a form. ">nana::appearance</a>. If a form would to be defined without min/max button and sizable border, then</p>
<div class="fragment"><div class="line"><a class="code" href="../../d6/d57/classnana_1_1form.html">nana::form</a> form(x, y, width, height, <a class="code" href="../../d5/d27/structnana_1_1appearance.html">nana::appearance</a>(<span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="keyword">false</span>));</div>
</div><!-- fragment --><p>This piece of code may be confusing because of the 5 parameters of the constructor of <code><a class="el" href="../../d6/d57/classnana_1_1form.html" title="Pop-up window. Is different from other window widgets: its default constructor create the window...">nana::form</a></code>. So the library provides a helper class for making it easy. For better readability and understandability Nana provides three templates classes to generate an appearance object: <a class="el" href="../../d6/d12/structnana_1_1appear_1_1decorate.html" title="Create an appearance of a window with &quot;decoration&quot; in non-client area, such as title bar...">nana::appear::decorate</a>, <a class="el" href="../../df/dc3/structnana_1_1appear_1_1bald.html" title="Create an appearance of a window without &quot;decoration&quot; with no titlebar and no 3D-look borders...">nana::appear::bald</a> and <a class="el" href="../../da/d19/structnana_1_1appear_1_1optional.html" title="Create a window with decoration depending on the first non-type template parameter. ">nana::appear::optional</a>. Each provide an operator that return a corresponding <a class="el" href="../../d5/d27/structnana_1_1appearance.html" title="Window appearance structure defined to specify the appearance of a form. ">nana::appearance</a> with predefined values.</p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>nana {</div>
<div class="line">        <span class="keyword">struct </span>appear </div>
<div class="line">        { </div>
<div class="line">                <span class="keyword">struct </span>minimize; </div>
<div class="line">                <span class="keyword">struct </span>maximize; </div>
<div class="line">                <span class="keyword">struct </span>sizable; </div>
<div class="line">                <span class="keyword">struct </span>taskbar; </div>
<div class="line">                <span class="keyword">struct </span>floating; </div>
<div class="line">                <span class="keyword">struct </span>no_activate; </div>
<div class="line">                <span class="keyword">template</span>&lt;   <span class="keyword">typename</span> Minimize = null_type, </div>
<div class="line">                                        <span class="keyword">typename</span> Maximize = null_type, </div>
<div class="line">                                        <span class="keyword">typename</span> Sizable = null_type, </div>
<div class="line">                                        <span class="keyword">typename</span> Floating = null_type, </div>
<div class="line">                                        <span class="keyword">typename</span> NoActive = null_type   &gt; <span class="keyword">struct </span>decorate; </div>
<div class="line">                <span class="keyword">template</span>&lt;   <span class="keyword">typename</span> Taskbar = null_type, </div>
<div class="line">                                        <span class="keyword">typename</span> Floating = null_type, </div>
<div class="line">                                        <span class="keyword">typename</span> NoActive = null_type, </div>
<div class="line">                                        <span class="keyword">typename</span> Minimize = null_type, </div>
<div class="line">                                        <span class="keyword">typename</span> Maximize = null_type, </div>
<div class="line">                                        <span class="keyword">typename</span> Sizable = null_type   &gt; <span class="keyword">struct </span>bald; </div>
<div class="line">                <span class="keyword">template</span>&lt;   <span class="keywordtype">bool</span> HasDecoration = <span class="keyword">true</span>, </div>
<div class="line">                                        <span class="keyword">typename</span> Taskbar = null_type, </div>
<div class="line">                                        <span class="keyword">typename</span> Floating = null_type, </div>
<div class="line">                                        <span class="keyword">typename</span> NoActive = null_type &gt; <span class="keyword">struct </span>optional; </div>
<div class="line">        }; }}</div>
</div><!-- fragment --><p>These templates generate appearances. Every template receives the template parameters for specifying the attributes of the appearance.</p>
<p><b>template <a class="el" href="../../d6/d12/structnana_1_1appear_1_1decorate.html" title="Create an appearance of a window with &quot;decoration&quot; in non-client area, such as title bar...">nana::appear::decorate</a></b> is used for creating an appearance of a window with "decoration". A window decoration in Windows is called the non-client area, such as title bar.</p>
<p>We can create a form without min/max button and sizable border like this: </p>
<div class="fragment"><div class="line"><span class="keyword">using</span> <a class="code" href="../../d1/d1c/structnana_1_1appear.html">nana::appear</a>;</div>
<div class="line"><a class="code" href="../../d6/d57/classnana_1_1form.html">nana::form</a> form(x, y, width, height, appear::decorate&lt;appear::taskbar&gt;());</div>
</div><!-- fragment --><div class="image">
<img src="../../Decoration.jpg" alt="Decoration.jpg"/>
<div class="caption">
Decoration appear::decorate&lt;&gt;() - generating an appearance with a border and titlebar</div></div>
<p>The appearance created by appear::decorate&lt;&gt;() has a titlebar and borders that are draw by the platform- window manager. If a window needs a minimize button, it should be: </p>
<div class="fragment"><div class="line">appear::decorate&lt;appear::minimize, appear::taskbar&gt;()</div>
</div><!-- fragment --><p><b><a class="el" href="../../df/dc3/structnana_1_1appear_1_1bald.html" title="Create an appearance of a window without &quot;decoration&quot; with no titlebar and no 3D-look borders...">nana::appear::bald</a></b> is used for creating a window without decoration.</p>
<div class="image">
<img src="../../noDecoration.jpg" alt="noDecoration.jpg"/>
<div class="caption">
No decoration appear::bald&lt;&gt;()</div></div>
<p>The appearance created by nana::appear::bald&lt;&gt;() has no titlebar and no 3D-look borders.</p>
<p>The appearances of these figures were created by templates without specifying the template parameters. Each template provides some parameters, and each template parameter name indicates what attribute is supported by the template. For example template <a class="el" href="../../d6/d12/structnana_1_1appear_1_1decorate.html" title="Create an appearance of a window with &quot;decoration&quot; in non-client area, such as title bar...">nana::appear::decorate</a> receives the parameters <a class="el" href="../../d6/d46/structnana_1_1appear_1_1minimize.html">nana::appear::minimize</a>, appear::maximize, appear::sizable, appear::floating and appear::no_activate. So, creating an appearance with decoration that has a minimize button and maximize button will be:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;nana/gui/wvl.hpp&gt;</span> </div>
<div class="line"><span class="keywordtype">int</span> main() </div>
<div class="line">{ </div>
<div class="line">    <span class="keyword">using namespace </span>nana; </div>
<div class="line">    form fm(<a class="code" href="../../d5/d1e/namespacenana_1_1_a_p_i.html#aeda48472927c65f3f790297e5fb2df84">API::make_center</a>(240, 160),  <a class="code" href="../../d6/d12/structnana_1_1appear_1_1decorate.html">appear::decorate&lt;appear::minimize, appear::maximize&gt;</a>()); </div>
<div class="line">    fm.show(); </div>
<div class="line">    <a class="code" href="../../d2/d76/namespacenana.html#adfeaf4a48fd8f02161268cde0ae797d9">exec</a>(); </div>
<div class="line">} </div>
</div><!-- fragment --> <div class="image">
<img src="../../minimize.jpg" alt="minimize.jpg"/>
<div class="caption">
Decoration with minimize button and maximize button</div></div>
<p> <b>The <a class="el" href="../../da/d19/structnana_1_1appear_1_1optional.html" title="Create a window with decoration depending on the first non-type template parameter. ">nana::appear::optional</a></b> is used to create a window with decoration depending on the first non-type template parameter.</p>
<p>There is a feature for these templates: the order of template parameters does not affect the order of explicit specifying template parameters, the name of template parameters just tell you which attribute can affect the appearance. For example:</p>
<p>nana::appear::decorate&lt;appear::minimize, appear::maximize&gt;() creates an appearance that is the same as the result created by nana::appear::decorate&lt;appear::maximize, appear::minimize&gt;().</p>
<p>nana::appear::decorate&lt;&gt;() creates an appearance that is the same as nana::appear::decorate&lt;int, int, int, int, int&gt;(), because the type of int is not wanted.</p>
<p>The parameter of class template <a class="el" href="../../d6/d12/structnana_1_1appear_1_1decorate.html" title="Create an appearance of a window with &quot;decoration&quot; in non-client area, such as title bar...">nana::appear::decorate</a> can be minimize, maximize, sizable, taskbar, floating.</p>
<p>The parameter of class template <a class="el" href="../../df/dc3/structnana_1_1appear_1_1bald.html" title="Create an appearance of a window without &quot;decoration&quot; with no titlebar and no 3D-look borders...">nana::appear::bald</a> can be taskbar, floating.</p>
<p>The parameter of class template <a class="el" href="../../da/d19/structnana_1_1appear_1_1optional.html" title="Create a window with decoration depending on the first non-type template parameter. ">nana::appear::optional</a> can be true, false, taskbar, floating.</p>
<h1><a class="anchor" id="event"></a>
Event Handling</h1>
<p>Event is a messaging mechanism provided by the window system. Various kinds of events are generated by the window system for notifying the application. A key or mouse event is generated when the user presses or releases a key or mouse button, and the application can receive the event and response to user actions.</p>
<p>The different window systems provide their own patterns of messaging mechanism. Nana implements an abstract pattern of event mechanism to hide the difference between different window systems.</p>
<h2><a class="anchor" id="reg"></a>
Registering and Unregistering an Event</h2>
<p>To response to the click action generated by any specified button, we need to make the click event for the button.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;nana/gui/wvl.hpp&gt;</span> </div>
<div class="line"><span class="preprocessor">#include &lt;nana/gui/widgets/button.hpp&gt;</span> </div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> foo() { } </div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main() </div>
<div class="line">{ </div>
<div class="line">    <span class="keyword">using namespace </span>nana; </div>
<div class="line">    form fm; </div>
<div class="line">    fm.<a class="code" href="../../d3/d95/classnana_1_1widget__object.html#acc81585b443ae00b6d3ac08945638b94">events</a>().<a class="code" href="../../dd/d19/structnana_1_1general__events.html#a0d38e277cb45ddeb6c492d8ce9705cfc">click</a>(foo); </div>
<div class="line">    <a class="code" href="../../d2/d76/namespacenana.html#adfeaf4a48fd8f02161268cde0ae797d9">exec</a>(); </div>
<div class="line">} </div>
</div><!-- fragment --><p>As shown in above code, the <code>event()</code> is a member template of class widget, and it is used for registering an event handler. The above code makes a click event for the <code>form</code> object. When the user clicks the body of the form, Nana is responsable for invoking the function <code>foo()</code> registered as a handler of the specified event. Additionally, the function <code>foo()</code> can be specified with a parameter of type <code>const <a class="el" href="../../d6/d7c/structnana_1_1arg__mouse.html">nana::arg_mouse</a>&amp;</code> to receive the information of the event. See details of <code>eventinfo</code> are described in section 6.2. </p>
<dl class="section see"><dt>See Also</dt><dd></dd></dl>
<p>The <code>event()</code> returns a handle of event handler if the registration is successful. The type of the return value is <a class="el" href="../../d2/d76/namespacenana.html#a68bd9618c0dd5b14783422f6e5cc683a">nana::event_handle</a>. With this handle, we can delete the event handler manually. For example:</p>
<div class="fragment"><div class="line"><a class="code" href="../../d2/d76/namespacenana.html#a68bd9618c0dd5b14783422f6e5cc683a">event_handle</a> handle = fm.events().click(foo); </div>
<div class="line">fm.umake_event(handle); </div>
</div><!-- fragment --><p>After calling the umake_event(), the <code>foo()</code> function would be not invoked when the user clicks the body of form. In most situations, we don't need to take care of deleting the event handler, because the event handlers will be deleted when the form is closed.</p>
<h2><a class="anchor" id="eve"></a>
Events</h2>
<p>An event type describes a specific event which is generated by Nana. For each event type, a corresponding class is defined by Nana, which is used for referring to an event type. The classes for event types are defined in the namespace nana, such as <code>click</code>, <code>mouse_move</code> and so on.</p>
<p>Every event contains some information. The information is sent to the application through a (const) reference to an <code>eventinfo</code> object in event handler.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;nana/gui/wvl.hpp&gt;</span> </div>
<div class="line"><span class="keywordtype">void</span> foo(<span class="keyword">const</span> <a class="code" href="../../d6/dc2/structnana_1_1arg__click.html">nana::arg_click</a>&amp; ei) </div>
<div class="line">{ </div>
<div class="line">        <span class="comment">//Refer to ei for information of event. </span></div>
<div class="line">} </div>
<div class="line"><span class="keywordtype">int</span> main() </div>
<div class="line">{ </div>
<div class="line">        <span class="keyword">using namespace </span>nana; </div>
<div class="line">        form fm; </div>
<div class="line">        fm.<a class="code" href="../../d3/d95/classnana_1_1widget__object.html#acc81585b443ae00b6d3ac08945638b94">events</a>().<a class="code" href="../../dd/d19/structnana_1_1general__events.html#a0d38e277cb45ddeb6c492d8ce9705cfc">click</a>(foo); </div>
<div class="line">        fm.show(); </div>
<div class="line">        <a class="code" href="../../d2/d76/namespacenana.html#adfeaf4a48fd8f02161268cde0ae797d9">exec</a>(); </div>
<div class="line">} </div>
</div><!-- fragment --><p>Nana.GUI provides some raw events, such as <code>click</code>, <code>mouse_move</code> and so on. Most of these events can work with all widgets implemented by Nana.GUI, but some of them are individual, like <code>unload</code> for <code>root widget</code> and <code>elapse</code> for <code>timer</code>.</p>
<p>Every widget has an interface for registering an event, named <code>events()</code>.</p>
<p>The events are:</p>
<table class="doxtable">
<tr>
<th>Event </th><th>argument </th><th>Description  </th></tr>
<tr>
<td><a class="el" href="../../dd/d19/structnana_1_1general__events.html#a0d38e277cb45ddeb6c492d8ce9705cfc" title="the window is clicked, but occurs after mouse_down and before mouse_up ">nana::general_events::click</a> </td><td><a class="el" href="../../d6/dc2/structnana_1_1arg__click.html" title="a higher level event argument than just mouse down ">nana::arg_click</a> </td><td>A mouse click event. </td></tr>
<tr>
<td>dbl_click </td><td><a class="el" href="../../d6/d7c/structnana_1_1arg__mouse.html">nana::arg_mouse</a> </td><td>A mouse double click event. </td></tr>
<tr>
<td>mouse_enter </td><td><a class="el" href="../../d6/d7c/structnana_1_1arg__mouse.html">nana::arg_mouse</a> </td><td>A mouse enters a widget. </td></tr>
<tr>
<td>mouse_move </td><td><a class="el" href="../../d6/d7c/structnana_1_1arg__mouse.html">nana::arg_mouse</a> </td><td>A mouse moves over a widget. </td></tr>
<tr>
<td>mouse_leave </td><td><a class="el" href="../../d6/d7c/structnana_1_1arg__mouse.html">nana::arg_mouse</a> </td><td>A mouse leaves a widget. </td></tr>
<tr>
<td>mouse_down </td><td>anana::rg_mouse </td><td>A mouse button is pressed on a widget. </td></tr>
<tr>
<td>mouse_up </td><td><a class="el" href="../../d6/d7c/structnana_1_1arg__mouse.html">nana::arg_mouse</a> </td><td>A mouse button is released on a widget. </td></tr>
<tr>
<td>mouse_wheel </td><td><a class="el" href="../../d0/dee/structnana_1_1arg__wheel.html" title="in arg_wheel event_code is event_code::mouse_wheel ">nana::arg_wheel</a> </td><td>A mouse scrolls the wheel on a widget. </td></tr>
<tr>
<td>mouse_dropfiles </td><td><a class="el" href="../../df/d14/structnana_1_1arg__dropfiles.html">nana::arg_dropfiles</a> </td><td>A mouse release over a window that is registered as recipient of drag and drop. </td></tr>
<tr>
<td>expose </td><td><a class="el" href="../../d4/d34/structnana_1_1arg__expose.html">nana::arg_expose</a> </td><td>the visibility changes </td></tr>
<tr>
<td>resizing </td><td><a class="el" href="../../d7/dac/structnana_1_1arg__resizing.html">nana::arg_resizing</a> </td><td>A widget's size is changing. </td></tr>
<tr>
<td>resized </td><td><a class="el" href="../../db/d8c/structnana_1_1arg__resized.html">nana::arg_resized</a> </td><td>A widget's size changed. </td></tr>
<tr>
<td>destroy </td><td><a class="el" href="../../d8/deb/structnana_1_1arg__destroy.html">nana::arg_destroy</a> </td><td>The window is destroyed, but occurs when all children have been destroyed </td></tr>
<tr>
<td>focus </td><td><a class="el" href="../../df/d30/structnana_1_1arg__focus.html">nana::arg_focus</a> </td><td>A widget's focus is changed. </td></tr>
<tr>
<td>key_press </td><td><a class="el" href="../../d0/de9/structnana_1_1arg__keyboard.html">nana::arg_keyboard</a> </td><td>a key is pressed while the window has focus. event code is event_code::key_press </td></tr>
<tr>
<td>key_release </td><td><a class="el" href="../../d0/de9/structnana_1_1arg__keyboard.html">nana::arg_keyboard</a> </td><td>a key is released while the window has focus. event code is event_code::key_release </td></tr>
<tr>
<td>key_char </td><td><a class="el" href="../../d0/de9/structnana_1_1arg__keyboard.html">nana::arg_keyboard</a> </td><td>a character, whitespace or backspace is pressed. event code is event_code::key_char. The nana::focus widget received a character. </td></tr>
<tr>
<td>shortkey </td><td><a class="el" href="../../d0/de9/structnana_1_1arg__keyboard.html">nana::arg_keyboard</a> </td><td>a defined short key is pressed. event code is event_code::shortkey. The widgets received a shortkey message. </td></tr>
<tr>
<td>nana::move </td><td><a class="el" href="../../da/dfe/structnana_1_1arg__move.html">nana::arg_move</a> </td><td>the window changes position </td></tr>
</table>
<dl class="deprecated"><dt><b><a class="el" href="../../da/d58/deprecated.html#_deprecated000001">Deprecated:</a></b></dt><dd>? elapse | | A widget received a tick that is sended by timer. unload | | A form is closed by clicking the X button, only works for root widget. key_up | | A keyboard is released on a focus widget. key_down | | A keyboard is pressed on a focus widget.</dd></dl>
<p>An user-defined event function may have a parameter of type <code>const <a class="el" href="../../d7/d9d/classnana_1_1event__arg.html" title="base class for all event argument types ">nana::event_arg</a>&amp;</code> for queering the event information, such as mouse position.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> foo();</div>
<div class="line"><span class="keywordtype">void</span> foo_with_parameter(<span class="keyword">const</span> <a class="code" href="../../d6/dc2/structnana_1_1arg__click.html">nana::arg_click</a>&amp;);</div>
<div class="line"><span class="keyword">class </span>user_def_functor</div>
<div class="line">{ <span class="keyword">public</span>:</div>
<div class="line">   <span class="keywordtype">void</span> operator()(<span class="keyword">const</span> <a class="code" href="../../d6/dc2/structnana_1_1arg__click.html">nana::arg_click</a>&amp;);              <span class="comment">//user-defined function must have the parameter.</span></div>
<div class="line">};</div>
<div class="line"><a class="code" href="../../d7/dc0/classnana_1_1button.html">nana::button</a>().<a class="code" href="../../d3/d95/classnana_1_1widget__object.html#acc81585b443ae00b6d3ac08945638b94">events</a>().<a class="code" href="../../dd/d19/structnana_1_1general__events.html#a0d38e277cb45ddeb6c492d8ce9705cfc">click</a>( foo                );</div>
<div class="line"><a class="code" href="../../d7/dc0/classnana_1_1button.html">nana::button</a>().<a class="code" href="../../d3/d95/classnana_1_1widget__object.html#acc81585b443ae00b6d3ac08945638b94">events</a>().<a class="code" href="../../dd/d19/structnana_1_1general__events.html#a0d38e277cb45ddeb6c492d8ce9705cfc">click</a>( foo_with_parameter );</div>
<div class="line"><a class="code" href="../../d7/dc0/classnana_1_1button.html">nana::button</a>().<a class="code" href="../../d3/d95/classnana_1_1widget__object.html#acc81585b443ae00b6d3ac08945638b94">events</a>().<a class="code" href="../../dd/d19/structnana_1_1general__events.html#a0d38e277cb45ddeb6c492d8ce9705cfc">click</a>( user_def_functor{} );</div>
</div><!-- fragment --><p><code>events()</code> members like click() returns a handle for uninstalling the associated user-defined event function and Nana.GUI destroys the user-defined event function automatically when the widget is beginning to destroy.</p>
<p>This just describes these raw events, but some widgets like <a class="el" href="../../da/de1/classnana_1_1treebox.html" title="Displays a hierarchical list of items, such as the files and directories on a disk. See also in documentation ">nana::treebox</a> provides some high-level events, such as expanding a node. These details are only described in its reference.</p>
<p>For different events, the <code>event_arg</code> contains different structures for these event types. The following paragraphs describe the details of event_arg.</p>
<h3><a class="anchor" id="mous"></a>
Mouse Events</h3>
<p>The mouse is an important and convenient input device. The user controls the mouse cursor on the screen through moving and clicking mouse. If the mouse cursor moves over on a widget, the system would generate a <code><a class="el" href="../../dd/d19/structnana_1_1general__events.html#af746fc5c5e1b66ec42957442849a8fb9" title="the cursor moves on the window ">nana::general_events::mouse_move</a></code> event to notify the program to which the widget belongs. The structure of mouse events uses the <a class="el" href="../../d6/d7c/structnana_1_1arg__mouse.html">nana::arg_mouse</a>:</p>
<div class="fragment"><div class="line"><span class="keyword">struct </span>arg_mouse</div>
<div class="line">        : <span class="keyword">public</span> event_arg</div>
<div class="line">{</div>
<div class="line">        <a class="code" href="../../d2/d76/namespacenana.html#aec14d9a922f2b2a5c52680e6f4c9c2d3">event_code</a> evt_code; </div>
<div class="line">        <a class="code" href="../../d2/d87/structnana_1_1detail_1_1window__handle__impl.html">::nana::window</a> window_handle;  </div>
<div class="line">        <a class="code" href="../../d0/d24/structnana_1_1point.html">::nana::point</a> pos;   </div>
<div class="line">        <a class="code" href="../../d2/d76/namespacenana.html#a19ba554a683a93eb1f6ba803c2959c8a">::nana::mouse</a> button;   </div>
<div class="line"></div>
<div class="line">        <span class="keywordtype">bool</span> <a class="code" href="../../d2/d76/namespacenana.html#a19ba554a683a93eb1f6ba803c2959c8aa983ece0c57fdf73508e1a4ff8e2c9eac">left_button</a>;       </div>
<div class="line">        <span class="keywordtype">bool</span> mid_button;        </div>
<div class="line">        <span class="keywordtype">bool</span> <a class="code" href="../../d2/d76/namespacenana.html#a19ba554a683a93eb1f6ba803c2959c8aa8c5c2ab2676b12fcb3e6deb5212ed90d">right_button</a>;      </div>
<div class="line">        <span class="keywordtype">bool</span> alt;                       </div>
<div class="line">        <span class="keywordtype">bool</span> shift;                     </div>
<div class="line">        <span class="keywordtype">bool</span> <a class="code" href="../../d2/d76/namespacenana.html#a7d0b56e77e3297aad698aae6af818282">ctrl</a>;                      </div>
<div class="line"></div>
<div class="line">        <span class="keywordtype">bool</span> is_left_button()<span class="keyword"> const</span></div>
<div class="line"><span class="keyword">        </span>{</div>
<div class="line">                <span class="keywordflow">return</span> (event_code::mouse_move == evt_code ? left_button : (mouse::left_button == button));</div>
<div class="line">        }</div>
<div class="line">};</div>
</div><!-- fragment --><p>The structure of mouse wheel event contains <a class="el" href="../../d0/dee/structnana_1_1arg__wheel.html" title="in arg_wheel event_code is event_code::mouse_wheel ">nana::arg_wheel</a>:</p>
<div class="fragment"><div class="line"><span class="keyword">struct </span>arg_wheel : <span class="keyword">public</span> arg_mouse</div>
<div class="line">{</div>
<div class="line">        <span class="keyword">enum class</span> wheel{</div>
<div class="line">                <a class="code" href="../../d2/d76/namespacenana.html#aa6c1e34e0e396f3e017f3f0459cc2e2dae6dec152d6a941fccb0a5e8cc2579cc3">vertical</a>,</div>
<div class="line">                <a class="code" href="../../d2/d76/namespacenana.html#aa6c1e34e0e396f3e017f3f0459cc2e2da4505cad087312551a6fbbe6ebe163e0f">horizontal</a></div>
<div class="line">        };</div>
<div class="line"></div>
<div class="line">        wheel   which;          </div>
<div class="line">        <span class="keywordtype">bool</span>    upwards;        </div>
<div class="line">        <span class="keywordtype">unsigned</span> <a class="codeRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/iterator/distance.html">distance</a>;      </div>
<div class="line">};</div>
</div><!-- fragment --><p>In an event handler function, we can refer to the structure by using <a class="el" href="../../d7/d9d/classnana_1_1event__arg.html" title="base class for all event argument types ">nana::event_arg</a> or some other base argument. For example:</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> foo(<span class="keyword">const</span> <a class="code" href="../../d6/d7c/structnana_1_1arg__mouse.html">nana::arg_mouse</a>&amp; ae) </div>
<div class="line">{ </div>
<div class="line">    <span class="keyword">using namespace </span>nana; </div>
<div class="line">    <span class="keywordflow">switch</span>(ea.evt_code) </div>
<div class="line">    { <span class="keywordflow">default</span>:            </div>
<div class="line">                          <span class="comment">//refers to the structure of mouse events in arg_mouse. </span></div>
<div class="line">             <span class="keywordflow">break</span>; </div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="../../d2/d76/namespacenana.html#aec14d9a922f2b2a5c52680e6f4c9c2d3a8405b4133b61983c995a62136337b4ec">evt_code::mouse_wheel</a>: </div>
<div class="line">                         <span class="comment">//refers to the structure of mouse_wheel event. </span></div>
<div class="line">            <span class="keywordflow">break</span>; </div>
<div class="line">    } </div>
<div class="line">} </div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="keywordtype">void</span> foo(<span class="keyword">const</span> <a class="code" href="../../d7/d9d/classnana_1_1event__arg.html">nana::event_arg</a>&amp; ea) </div>
<div class="line">{ </div>
<div class="line">    <span class="keyword">using namespace </span>nana; </div>
<div class="line">   <span class="keywordflow">if</span>      (dynamic_cast&lt;arg_wheel&amp;&gt; (ea) </div>
<div class="line">   {              <span class="comment">//refers to the structure of mouse_wheel event.   </span></div>
<div class="line">   }</div>
<div class="line">   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dynamic_cast&lt;arg_mouse&amp;&gt; (ea)    </div>
<div class="line">   {          <span class="comment">//refers to the structure of mouse events.        </span></div>
<div class="line">   }</div>
<div class="line">} </div>
</div><!-- fragment --><p>To receive a mouse event, register the event with the specific type. </p>
<div class="fragment"><div class="line"><a class="code" href="../../d2/d76/namespacenana.html#aec14d9a922f2b2a5c52680e6f4c9c2d3aa8affc088cbca89fa20dbd98c91362e4">click</a>/<a class="code" href="../../d2/d76/namespacenana.html#aec14d9a922f2b2a5c52680e6f4c9c2d3a37a3fa88c30e2a0f1273bc62a9cb1aae">dbl_click</a> </div>
</div><!-- fragment --><p>When the user clicks mouse and the mouse cursor is in a widget, the widget receives a click event that is generated by Nana. </p>
<div class="fragment"><div class="line"><a class="code" href="../../d2/d76/namespacenana.html#aec14d9a922f2b2a5c52680e6f4c9c2d3a41bc07e96e66c3decc6bcb84741efbd2">mouse_enter</a>/<a class="code" href="../../d2/d76/namespacenana.html#aec14d9a922f2b2a5c52680e6f4c9c2d3a03f85558f24cc469dac5df2fdc8fd117">mouse_move</a>/<a class="code" href="../../d2/d76/namespacenana.html#aec14d9a922f2b2a5c52680e6f4c9c2d3a9be3f0b250b906b4d2a92039fd323b5d">mouse_leave</a> </div>
</div><!-- fragment --><p>This event is sent to a widget when the mouse cursor enters/leaves the widget. </p>
<div class="fragment"><div class="line"><a class="code" href="../../d2/d76/namespacenana.html#aec14d9a922f2b2a5c52680e6f4c9c2d3a4d16ee9fcc872cc4c4028928a613613f">mouse_down</a>/<a class="code" href="../../d2/d76/namespacenana.html#aec14d9a922f2b2a5c52680e6f4c9c2d3af09f090ce1d0582bb74995cd677bf7cd">mouse_up</a> </div>
</div><!-- fragment --><p>This event is sent when the user presses/releases/moves the mouse while the mouse cursor is in a widget.</p>
<h3><a class="anchor" id="Keyboard"></a>
Keyboard Events</h3>
<p>There are four different kinds of keyboard events in Nana C++ Library:</p>
<ul>
<li><a class="el" href="../../dd/d19/structnana_1_1general__events.html#a4509433d673823a86974cc511b87518e" title="a key is pressed while the window has focus. event code is event_code::key_press ">nana::general_events::key_press</a>,</li>
<li><a class="el" href="../../dd/d19/structnana_1_1general__events.html#a30a31466d3980d16b160f664d67663c6" title="a key is released while the window has focus. event code is event_code::key_release ...">nana::general_events::key_release</a>,</li>
<li><a class="el" href="../../dd/d19/structnana_1_1general__events.html#aa8f07e5c2db7c3913fdfdb2d0b9d55af" title="a character, whitespace or backspace is pressed. event code is event_code::key_char ...">nana::general_events::key_char</a> and</li>
<li><a class="el" href="../../dd/d19/structnana_1_1general__events.html#aae67695a26fe8ed53718f8c72715ebd1" title="a defined short key is pressed. event code is event_code::shortkey ">nana::general_events::shortkey</a>.</li>
</ul>
<p>A window system usually uses an input focus to represent a window which would receive the keyboard events. In general, a window which user clicks would be set to the input focus widow in Nana C++ Library. Additionally, the program can determinate which window gets the input focus by calling <a class="el" href="../../d5/d1e/namespacenana_1_1_a_p_i.html#a9d328da2eba5141996a2aecc4392d559">nana::API::focus_window(window wd)</a> or the member function <a class="el" href="../../d9/dd8/classnana_1_1widget.html#ac108e37dc47d4e2be52ea25f5be7ac0a">nana::widget::focus()</a>.</p>
<p>The structure of keyboard event contains:</p>
<div class="fragment"><div class="line"><span class="keyword">struct </span>arg_keyboard : <span class="keyword">public</span> event_arg</div>
<div class="line">{</div>
<div class="line">        <a class="code" href="../../d2/d76/namespacenana.html#aec14d9a922f2b2a5c52680e6f4c9c2d3">event_code</a> evt_code;        </div>
<div class="line">        <a class="code" href="../../d2/d87/structnana_1_1detail_1_1window__handle__impl.html">::nana::window</a> window_handle;   </div>
<div class="line">        <span class="keyword">mutable</span> <span class="keywordtype">wchar_t</span> key;        </div>
<div class="line">        <span class="keyword">mutable</span> <span class="keywordtype">bool</span> ignore;        </div>
<div class="line">        <span class="keywordtype">bool</span> <a class="code" href="../../d2/d76/namespacenana.html#a7d0b56e77e3297aad698aae6af818282">ctrl</a>;                      </div>
<div class="line">        <span class="keywordtype">bool</span> shift;                     </div>
<div class="line">};</div>
</div><!-- fragment --><p>As the definition shown, the member <code>key</code> and <code>ignore</code> are defined as <code>mutable</code>, the feature will be explained later. </p>
<div class="fragment"><div class="line"><a class="code" href="../../d2/d76/namespacenana.html#aec14d9a922f2b2a5c52680e6f4c9c2d3a3d4ad044874696eaf51795edcc3b742f">key_press</a>/<a class="code" href="../../d2/d76/namespacenana.html#aec14d9a922f2b2a5c52680e6f4c9c2d3aebe11bf99c13c25d073cd472babee419">key_release</a> </div>
</div><!-- fragment --><p>When the users hit the keyboard, the <code>nana::key_press</code> would be generated when a key is pressed down, and the <code>nana::key_release</code> would be generated when the pressed key is released. </p>
<div class="fragment"><div class="line"><a class="code" href="../../d2/d76/namespacenana.html#aec14d9a922f2b2a5c52680e6f4c9c2d3a08e1cc84334738d91054f2bf7ab10638">key_char</a> </div>
</div><!-- fragment --><p>The <code>key_char</code> event is an abstract event. A window system usually translates the keys into characters. For example, to type a Chinese character one usually needs to hit in the keyboard more than one key and the window system translates these keys into a Chinese character and then a <code>key_char</code> event is generated and sent to the program.</p>
<p>The two members, <code>key</code> and <code>ignore</code>, are defined as <code>mutable</code> in the structure of key event. It is used to modify the state of <code>key_char</code> event. During <code>key_char</code> processing, if the member <code>ignore</code> is set to <code>true</code>, Nana will ignore the key. For example, when a program is designed to receive the a number as input, the program should test the key in key_char event, and set the <code>ignore</code> to true if the input char is not a digit. Like in the code below:</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> only_digital_allowed(<span class="keyword">const</span> <a class="code" href="../../d0/de9/structnana_1_1arg__keyboard.html">nana::arg_keyboard</a>&amp; ei) </div>
<div class="line">{ </div>
<div class="line">        ei.<a class="code" href="../../d0/de9/structnana_1_1arg__keyboard.html#a683f0edae9cb6ce08568e808c75d5362">ignore</a> = (ei.<a class="code" href="../../d0/de9/structnana_1_1arg__keyboard.html#acfd23f22574a43fdd414d4f46e9727a7">key</a> &lt; <span class="charliteral">&#39;0&#39;</span> || ei.<a class="code" href="../../d0/de9/structnana_1_1arg__keyboard.html#acfd23f22574a43fdd414d4f46e9727a7">key</a> &gt; <span class="charliteral">&#39;9&#39;</span>); </div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="PNG"></a>
Enable the PNG support for Nana C++ Library</h1>
<p>See <a href="https://github.com/cnjinhao/nana/wiki/Configuration-of-Third-Party-Libraries-for-Nana#enable-the-png-support-in-visual-studio-2015">Enable PNG</a></p>
<h1><a class="anchor" id="msg"></a>
Message box</h1>
<p>The <code>class <a class="el" href="../../d8/d97/classnana_1_1msgbox.html" title="Prefabricated modal dialog box (with text, icon and actions buttons) that inform and instruct the use...">nana::msgbox</a></code> is used for displaying a modal dialog box to prompt a brief message. A brief example.</p>
<div class="fragment"><div class="line"><a class="code" href="../../d8/d97/classnana_1_1msgbox.html">nana::msgbox</a> m(<span class="stringliteral">&quot;msgbox example&quot;</span>);</div>
<div class="line">m &lt;&lt; <span class="stringliteral">&quot;This is a msgbox example.&quot;</span>;</div>
<div class="line">m();</div>
</div><!-- fragment --><div class="image">
<img src="../../msgbox.jpg" alt="msgbox.jpg"/>
<div class="caption">
Modal dialog box to prompt a brief message</div></div>
<p> The msgbox has a C++ stream-like style, so we can easily display strings, numbers and all objects whose type overloads an <code>operator&lt;&lt;()</code> for <a class="elRef" doxygen="C:/Prog/ExtLib/nana-docs/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w//" href="http://en.cppreference.com/w/cpp/io/basic_ostream.html">std::ostream</a>. Sometimes, the application should ask user for a decision, for example, ask user whether to exit.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> when_exit(<span class="keyword">const</span> <a class="code" href="../../d0/d2c/structnana_1_1arg__unload.html">nana::arg_unload</a>&amp; ei)</div>
<div class="line">{</div>
<div class="line">        <a class="code" href="../../d8/d97/classnana_1_1msgbox.html">nana::msgbox</a> m(ei.window, <span class="stringliteral">&quot;msgbox example&quot;</span>, <a class="code" href="../../d8/d97/classnana_1_1msgbox.html#a305112845be74452713ff42e871a21f2a358de86da7da377bd12ac4febaaec55e">nana::msgbox::yes_no</a>);</div>
<div class="line">        m.icon(m.icon_question;</div>
<div class="line">        m &lt;&lt; <span class="stringliteral">&quot;Are you sure you want to exit the game?&quot;</span>);</div>
<div class="line">        ei.unload.<a class="code" href="../../d0/d2c/structnana_1_1arg__unload.html#ab5228dd3e0e98380b6f869c2419ce063">cancel</a> = (m() != m.pick_yes);</div>
<div class="line">}</div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">        <a class="code" href="../../d6/d57/classnana_1_1form.html">nana::form</a> fm;</div>
<div class="line">        fm.<a class="code" href="../../d3/d95/classnana_1_1widget__object.html#acc81585b443ae00b6d3ac08945638b94">events</a>().<a class="code" href="../../d9/d7f/structnana_1_1detail_1_1events__root__extension.html#ac4c367675d9e3ee1fbe775af84a62947">unload</a>(when_exit);</div>
<div class="line">        fm.<a class="code" href="../../d9/dd8/classnana_1_1widget.html#aa6bc5708ecaff3ede2945d19797394d5">show</a>();</div>
<div class="line">        <a class="code" href="../../d2/d76/namespacenana.html#adfeaf4a48fd8f02161268cde0ae797d9">nana::exec</a>();</div>
<div class="line">}</div>
</div><!-- fragment --><div class="image">
<img src="../../exitgame.jpg" alt="exitgame.jpg"/>
<div class="caption">
Exit game</div></div>
<h1><a class="anchor" id="icon"></a>
Window Icon</h1>
<p>There are two interfaces to set an icon for a window which is a root_widget, such as form and nested_form, thay are defined in namespace <a class="el" href="../../d5/d1e/namespacenana_1_1_a_p_i.html">nana::API</a>.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code" href="../../d5/d1e/namespacenana_1_1_a_p_i.html#a2dc88505075b3bb03767c29fecd9f4d9">window_icon_default</a>(<span class="keyword">const</span> <a class="code" href="../../d9/de1/classnana_1_1paint_1_1image.html">nana::paint::image</a>&amp;);</div>
<div class="line"><span class="keywordtype">void</span> <a class="code" href="../../d5/d1e/namespacenana_1_1_a_p_i.html#a3dd2d6a9cb60a675df30605b4ffcca75">window_icon</a>(<a class="code" href="../../d2/d87/structnana_1_1detail_1_1window__handle__impl.html">nana::window</a>, <span class="keyword">const</span> <a class="code" href="../../d9/de1/classnana_1_1paint_1_1image.html">nana::paint::image</a>&amp;);</div>
</div><!-- fragment --><p>window_icon_default() sets a default icon, and after calling it, all windows will set the default icon automatically while they are creating. Although the Nana C++ Library is aimed for cross-platform, there is a distinction in Nana between Windows and Linux(X11). The icon of a window only could be an ICON file in Windows. If cross-platform is desired, the code should be treated differently.</p>
<div class="fragment"><div class="line"><span class="keyword">using namespace </span>nana;</div>
<div class="line">form fm;</div>
<div class="line"><span class="preprocessor">#if defined(NANA_WINDOWS)</span></div>
<div class="line"><span class="preprocessor"></span><a class="code" href="../../d5/d1e/namespacenana_1_1_a_p_i.html#a3dd2d6a9cb60a675df30605b4ffcca75">API::window_icon</a>(fm, <a class="code" href="../../d9/de1/classnana_1_1paint_1_1image.html">nana::paint::image</a>(<span class="stringliteral">&quot;icon.ico&quot;</span>));</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span><a class="code" href="../../d5/d1e/namespacenana_1_1_a_p_i.html#a3dd2d6a9cb60a675df30605b4ffcca75">API::window_icon</a>(fm, <a class="code" href="../../d9/de1/classnana_1_1paint_1_1image.html">nana::paint::image</a>(<span class="stringliteral">&quot;icon.bmp&quot;</span>));</div>
<div class="line"><span class="preprocessor">#endif</span></div>
</div><!-- fragment --><p>Under Windows, the icon of window is the icon of exe file usually, the icon file is stored in the exe file as a resouce. To set the icon resouce for the window, we just open the exe with class image in this way. </p>
<div class="fragment"><div class="line">API::window_icon_default(<a class="code" href="../../d9/de1/classnana_1_1paint_1_1image.html">nana::paint::image</a>(<span class="stringliteral">&quot;program.exe&quot;</span>));</div>
</div><!-- fragment --><p>or </p>
<div class="fragment"><div class="line">API::window_icon(a_form_object, <a class="code" href="../../d9/de1/classnana_1_1paint_1_1image.html">nana::paint::image</a>(<span class="stringliteral">&quot;program.exe&quot;</span>));</div>
</div><!-- fragment --><p>Posted in Nana C++ Library | Tags: c++, Cross-platform, gui, nana </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
